<!doctype html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hemodialysis Patient Record</title>

  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>

  <style>
        body {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Microsoft JhengHei', 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            height: 100%;
        }

        html {
            height: 100%;
        }

        * {
            box-sizing: border-box;
        }

        .header {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 50%, #06b6d4 100%);
            color: white;
            padding: 20px 32px;
            box-shadow: 0 4px 20px rgba(37, 99, 235, 0.3);
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .hospital-info h1 {
            margin: 0;
            font-size: 24px;
            font-weight: 700;
            letter-spacing: 0.5px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .hospital-info p {
            margin: 6px 0 0 0;
            font-size: 14px;
            opacity: 0.95;
            font-weight: 500;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        .user-info span {
            background: rgba(255, 255, 255, 0.15);
            padding: 8px 16px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        /* èªç³»åˆ‡æ›æŒ‰éˆ• */
        .lang-toggle {
            display: flex;
            align-items: center;
            gap: 6px;
            background: rgba(255, 255, 255, 0.1);
            padding: 4px;
            border-radius: 999px;
            box-shadow: 0 2px 8px rgba(15, 23, 42, 0.25);
        }

        .lang-btn {
            border: none;
            background: transparent;
            padding: 4px 10px;
            border-radius: 999px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            color: #e2e8f0;
            transition: all 0.2s ease;
        }

        .lang-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            color: #ffffff;
        }

        .lang-btn.active {
            background: #ffffff;
            color: #1e40af;
            box-shadow: 0 1px 4px rgba(15, 23, 42, 0.3);
        }

        .main-tabs {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(226, 232, 240, 0.5);
            position: fixed;
            top: 84px;
            left: 0;
            right: 0;
            z-index: 999;
            display: flex;
            justify-content: center;
            padding: 0 32px;
            overflow-x: auto;
            box-shadow: 0 2px 12px rgba(0, 0, 0, 0.05);
        }

        .main-tab {
            padding: 18px 28px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            color: #64748b;
            font-weight: 600;
            white-space: nowrap;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            font-size: 15px;
        }

        .main-tab::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 3px;
            background: linear-gradient(90deg, #3b82f6, #06b6d4);
            transform: translateX(-50%);
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 3px 3px 0 0;
        }

        .main-tab:hover {
            color: #3b82f6;
            background: linear-gradient(180deg, rgba(59, 130, 246, 0.05) 0%, transparent 100%);
        }

        .main-tab:hover::before {
            width: 80%;
        }

        .main-tab.active {
            color: #1e40af;
            background: linear-gradient(180deg, rgba(59, 130, 246, 0.08) 0%, transparent 100%);
        }

        .main-tab.active::before {
            width: 100%;
        }

        .content-wrapper {
            margin-top: 156px;
            padding: 32px;
            max-width: 1600px;
            margin-left: auto;
            margin-right: auto;
        }

        .patient-header-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 16px;
            padding: 28px;
            margin-bottom: 28px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08), 0 0 0 1px rgba(59, 130, 246, 0.1);
            border-left: 5px solid transparent;
            border-image: linear-gradient(180deg, #3b82f6, #06b6d4) 1;
            position: relative;
            overflow: hidden;
        }

        .patient-header-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.05) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(30%, -30%);
        }

        .patient-header-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 24px;
            position: relative;
            z-index: 1;
        }

        .patient-header-item {
            display: flex;
            flex-direction: column;
            gap: 6px;
            padding: 12px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.6);
            transition: all 0.3s ease;
        }

        .patient-header-item:hover {
            background: rgba(255, 255, 255, 0.9);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .patient-header-label {
            font-size: 12px;
            color: #64748b;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .patient-header-value {
            font-size: 17px;
            color: #1e293b;
            font-weight: 700;
        }

        .patient-name-large {
            font-size: 28px;
            color: #1e40af;
            font-weight: 800;
            letter-spacing: 0.5px;
        }

        .alert-banner {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border: 2px solid #fca5a5;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 28px;
            display: flex;
            align-items: center;
            gap: 16px;
            box-shadow: 0 4px 16px rgba(220, 38, 38, 0.15);
            position: relative;
            overflow: hidden;
        }

        .alert-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(180deg, #dc2626, #ef4444);
        }

        .alert-icon {
            font-size: 32px;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100 { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-weight: 700;
            color: #991b1b;
            margin-bottom: 8px;
            font-size: 16px;
            letter-spacing: 0.3px;
        }

        .alert-items {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            font-size: 14px;
            color: #dc2626;
            font-weight: 600;
        }

        .alert-items span {
            background: rgba(255, 255, 255, 0.7);
            padding: 6px 12px;
            border-radius: 8px;
            border: 1px solid rgba(220, 38, 38, 0.2);
        }

        .two-column-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .card {
            background: linear-gradient(135deg, #ffffff 0%, #fafbfc 100%);
            border-radius: 16px;
            padding: 28px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06), 0 0 0 1px rgba(148, 163, 184, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #3b82f6, #06b6d4, #8b5cf6);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .card:hover {
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12), 0 0 0 1px rgba(59, 130, 246, 0.2);
            transform: translateY(-2px);
        }

        .card:hover::before {
            opacity: 1;
        }

        .card-title {
            font-size: 19px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f1f5f9;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .info-label {
            font-size: 13px;
            color: #64748b;
            font-weight: 500;
        }

        .info-value {
            font-size: 15px;
            color: #1e293b;
            font-weight: 600;
        }

        .vital-signs-table {
            width: 100%;
            border-collapse: collapse;
        }

        .vital-signs-table th {
            background: #f8fafc;
            padding: 12px;
            text-align: left;
            font-size: 13px;
            color: #64748b;
            font-weight: 600;
            border-bottom: 2px solid #e2e8f0;
        }

        .vital-signs-table td {
            padding: 12px;
            border-bottom: 1px solid #e2e8f0;
            font-size: 14px;
            color: #1e293b;
        }

        .status-normal {
            color: #10b981;
            font-weight: 600;
        }

        .status-warning {
            color: #f59e0b;
            font-weight: 600;
        }

        .status-danger {
            color: #ef4444;
            font-weight: 600;
        }

        .chart-view-toggle {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
        }

        .toggle-btn {
            padding: 10px 20px;
            border: 2px solid #e2e8f0;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            color: #64748b;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .toggle-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(59, 130, 246, 0.1);
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s;
        }

        .toggle-btn:hover {
            background: #f8fafc;
            border-color: #3b82f6;
            color: #3b82f6;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
        }

        .toggle-btn:hover::before {
            width: 200px;
            height: 200px;
        }

        .toggle-btn.active {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            border-color: #2563eb;
            box-shadow: 0 4px 16px rgba(37, 99, 235, 0.3);
        }

        .monitoring-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 13px;
        }

        .monitoring-table th {
            background: #f8fafc;
            padding: 10px 8px;
            text-align: center;
            font-size: 12px;
            color: #64748b;
            font-weight: 600;
            border: 1px solid #e2e8f0;
        }

        .monitoring-table td {
            padding: 10px 8px;
            text-align: center;
            border: 1px solid #e2e8f0;
            color: #1e293b;
        }

        .sub-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            border-bottom: 2px solid #f1f5f9;
            background: linear-gradient(180deg, transparent 0%, rgba(241, 245, 249, 0.3) 100%);
            border-radius: 8px 8px 0 0;
            padding: 8px 8px 0 8px;
        }

        .sub-tab {
            padding: 12px 24px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            color: #64748b;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 8px 8px 0 0;
            position: relative;
        }

        .sub-tab:hover {
            color: #3b82f6;
            background: rgba(59, 130, 246, 0.05);
        }

        .sub-tab.active {
            color: #1e40af;
            background: white;
            border-bottom-color: #3b82f6;
            box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.05);
        }

        .notes-content {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            min-height: 200px;
        }

        .note-item {
            background: white;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 12px;
            border-left: 3px solid #2563eb;
        }

        .note-time {
            font-size: 12px;
            color: #64748b;
            margin-bottom: 4px;
        }

        .note-text {
            font-size: 14px;
            color: #1e293b;
            line-height: 1.6;
        }

        .add-note-btn {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 700;
            margin-top: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 16px rgba(37, 99, 235, 0.3);
            position: relative;
            overflow: hidden;
        }

        .add-note-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }

        .add-note-btn:hover {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 99, 235, 0.4);
        }

        .add-note-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .add-note-btn:active {
            transform: translateY(0);
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin-top: 16px;
        }

        .hidden {
            display: none;
        }

        .badge {
            display: inline-block;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border: 2px solid;
        }

        .badge-high-risk {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            color: #991b1b;
            border-color: #fca5a5;
        }

        .badge-standard {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            color: #1e40af;
            border-color: #93c5fd;
        }

        @media (max-width: 1024px) {
            .two-column-layout {
                grid-template-columns: 1fr;
            }

            .patient-header-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            }

            .content-wrapper {
                padding: 16px;
            }

            .main-tabs {
                padding: 0 16px;
            }
        }

        @media (max-width: 768px) {
            .info-grid {
                grid-template-columns: 1fr;
            }

            .monitoring-table {
                font-size: 11px;
            }

            .monitoring-table th,
            .monitoring-table td {
                padding: 6px 4px;
            }
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .biochem-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 16px;
        }

        .biochem-table th {
            background: #f8fafc;
            padding: 12px;
            text-align: center;
            font-size: 13px;
            color: #64748b;
            font-weight: 600;
            border: 1px solid #e2e8f0;
        }

        .biochem-table td {
            padding: 12px;
            text-align: center;
            border: 1px solid #e2e8f0;
            font-size: 14px;
        }

        .value-normal {
            color: #10b981;
            font-weight: 600;
        }

        .value-warning {
            color: #f59e0b;
            font-weight: 600;
        }

        .value-danger {
            color: #ef4444;
            font-weight: 600;
        }

        .trend-chart-small {
            height: 200px;
            margin-top: 16px;
        }

        .ai-prediction-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .prediction-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1), 0 0 0 1px rgba(59, 130, 246, 0.1);
            border-top: 5px solid transparent;
            border-image: linear-gradient(90deg, #3b82f6, #06b6d4) 1;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .prediction-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200px;
            height: 200px;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.08) 0%, transparent 70%);
            border-radius: 50%;
        }

        .prediction-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(59, 130, 246, 0.2);
        }

        .prediction-title {
            font-size: 17px;
            font-weight: 700;
            color: #1e293b;
            margin-bottom: 16px;
            position: relative;
            z-index: 1;
        }

        .prediction-value {
            font-size: 36px;
            font-weight: 800;
            background: linear-gradient(135deg, #3b82f6, #06b6d4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .prediction-subtitle {
            font-size: 14px;
            color: #64748b;
            margin-bottom: 16px;
            font-weight: 500;
            position: relative;
            z-index: 1;
        }

        .risk-indicator {
            display: inline-block;
            padding: 8px 20px;
            border-radius: 24px;
            font-size: 14px;
            font-weight: 700;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            border: 2px solid;
            position: relative;
            z-index: 1;
        }

        .risk-low {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            color: #166534;
            border-color: #86efac;
        }

        .risk-medium {
            background: linear-gradient(135deg, #fef3c7, #fde68a);
            color: #92400e;
            border-color: #fcd34d;
        }

        .risk-high {
            background: linear-gradient(135deg, #fee2e2, #fecaca);
            color: #991b1b;
            border-color: #fca5a5;
        }

        .risk-warning {
            background: linear-gradient(135deg, #fed7aa, #fdba74);
            color: #9a3412;
            border-color: #fb923c;
        }

        .feature-importance {
            margin-top: 16px;
        }

        .feature-bar {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }

        .feature-label {
            width: 120px;
            font-size: 12px;
            color: #64748b;
        }

        .feature-bar-bg {
            flex: 1;
            height: 20px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .feature-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #2563eb, #60a5fa);
            transition: width 0.3s ease;
        }

        .disclaimer {
            background: #fef3c7;
            border: 1px solid #fde68a;
            border-radius: 8px;
            padding: 12px;
            margin-top: 24px;
            font-size: 13px;
            color: #92400e;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: white;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.06);
            text-align: center;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: #2563eb;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 13px;
            color: #64748b;
            font-weight: 500;
        }

        .access-timeline {
            position: relative;
            padding-left: 40px;
            margin-top: 20px;
        }

        .timeline-item {
            position: relative;
            padding-bottom: 24px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -29px;
            top: 8px;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #2563eb;
            border: 3px solid white;
            box-shadow: 0 0 0 2px #2563eb;
        }

        .timeline-item::after {
            content: '';
            position: absolute;
            left: -24px;
            top: 20px;
            width: 2px;
            height: calc(100% - 12px);
            background: #e2e8f0;
        }

        .timeline-item:last-child::after {
            display: none;
        }

        .timeline-date {
            font-size: 12px;
            color: #64748b;
            margin-bottom: 4px;
        }

        .timeline-content {
            font-size: 14px;
            color: #1e293b;
            line-height: 1.6;
        }

        .screening-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .screening-card {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            border: 1px solid #e2e8f0;
        }

        .screening-name {
            font-size: 14px;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 8px;
        }

        .screening-result {
            font-size: 13px;
            color: #64748b;
            margin-bottom: 4px;
        }

        .screening-date {
            font-size: 12px;
            color: #94a3b8;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <div class="hospital-info">
        <h1 id="hospital-name">ä¸‰è»ç¸½é†«é™¢ è¡€æ¶²é€æå®¤</h1>
      </div>
      <div class="header-right">
        <div class="lang-toggle">
          <button class="lang-btn active" data-lang="zh">ä¸­</button>
          <button class="lang-btn" data-lang="en">EN</button>
        </div>
        <div class="user-info">
          <span>è­·ç†å¸«ï¼šæ±ªæ±ª</span>
          <span>2024-03-15 08:30</span>
        </div>
      </div>
    </div>
  </header>

  <nav class="main-tabs">
    <div class="main-tab active" data-tab="current-dialysis" data-i18n-key="tab-current-dialysis">ğŸ’§æœ¬æ¬¡é€æ</div>
    <div class="main-tab" data-tab="biochem-anemia" data-i18n-key="tab-biochem-anemia">ğŸ§ª ç”ŸåŒ–æ•¸æ“š</div>
    <div class="main-tab" data-tab="dialysis-efficiency" data-i18n-key="tab-dialysis-efficiency">âš¡é€ææ•ˆèƒ½èˆ‡éª¨ç—…</div>
    <div class="main-tab" data-tab="vascular-access" data-i18n-key="tab-vascular-access">ğŸ©¸è¡€ç®¡é€šè·¯</div>
    <div class="main-tab" data-tab="infection-screening" data-i18n-key="tab-infection-screening">ğŸ¦  æ„ŸæŸ“èˆ‡ç¯©æª¢</div>
    <div class="main-tab" data-tab="ai-prediction" data-i18n-key="tab-ai-prediction">ğŸ¤–AI é æ¸¬</div>
    <div class="main-tab" data-tab="statistics" data-i18n-key="tab-statistics">ğŸ“Šçµ±è¨ˆèˆ‡é†«è­·å“è³ª</div>
  </nav>

  <div class="content-wrapper">
    <!-- Tab 1: Current Dialysis -->
    <div class="tab-content active" id="current-dialysis">
      <div class="patient-header-card">
        <div class="patient-header-grid">
          <div class="patient-header-item">
            <div class="patient-header-label" data-i18n-key="label-name">ğŸ‘¤ å§“å</div>
            <div class="patient-name-large" id="patient-name" data-field="patient-name"></div>
          </div>
          <div class="patient-header-item">
            <div class="patient-header-label" data-i18n-key="label-gender-age">æ€§åˆ¥ / å¹´é½¡</div>
            <div class="patient-header-value" data-field="patient-gender-age"></div>
          </div>
          <div class="patient-header-item">
            <div class="patient-header-label" data-i18n-key="label-chart-no">ğŸ“‹ç—…æ­·è™Ÿ</div>
            <div class="patient-header-value" data-field="patient-chart-no"></div>
          </div>
          <div class="patient-header-item">
            <div class="patient-header-label" data-i18n-key="label-risk">âš ï¸ç—…äººåˆ†ç´š</div>
            <div class="patient-header-value">
              <span class="badge badge-high-risk" data-field="patient-risk-badge"></span>
            </div>
          </div>
          <div class="patient-header-item">
            <div class="patient-header-label" data-i18n-key="label-doctor">ğŸ‘¨â€âš•ï¸ä¸»æ²»é†«å¸«</div>
            <div class="patient-header-value" data-field="patient-doctor"></div>
          </div>
          <div class="patient-header-item">
            <div class="patient-header-label" data-i18n-key="label-start">é€æèµ·å§‹</div>
            <div class="patient-header-value" data-field="patient-dialysis-start"></div>
          </div>
          <div class="patient-header-item">
            <div class="patient-header-label" data-i18n-key="label-ward-bed">ğŸ¥é™¢å€ / åºŠè™Ÿ</div>
            <div class="patient-header-value" data-field="patient-ward-bed"></div>
          </div>
          <div class="patient-header-item">
            <div class="patient-header-label" data-i18n-key="label-session-count">ğŸ”¢é€ææ¬¡æ•¸</div>
            <div class="patient-header-value" data-field="patient-session-count"></div>
          </div>
        </div>
      </div>

      <div class="alert-banner">
        <div class="alert-icon">âš ï¸</div>
        <div class="alert-content">
          <div class="alert-title" data-i18n-key="alert-today-title">ä»Šæ—¥è­¦ç¤º</div>
          <div class="alert-items">
            <span>ğŸ”´ ä½è¡€å£“äº‹ä»¶ x2</span>
            <span>ğŸŸ¡ è‚Œè‚‰æŠ½ç­‹ x1</span>
            <span>ğŸŸ¡ æœªé”è™•æ–¹è„«æ°´é‡ (-0.3L)</span>
          </div>
        </div>
      </div>

      <div class="two-column-layout">
        <div class="card">
          <div class="card-title" data-i18n-key="card-current-summary">ğŸ“‹ æœ¬æ¬¡é€æè™•æ–¹ &amp; æ‘˜è¦</div>
          <div class="info-grid">
            <div class="info-item">
              <div class="info-label" data-i18n-key="label-session-date">ğŸ“…é€ææ—¥æœŸ</div>
              <div class="info-value" data-field="session-date"></div>
            </div>
            <div class="info-item">
              <div class="info-label" data-i18n-key="label-session-shift">ğŸŒ…ç­åˆ¥</div>
              <div class="info-value" data-field="session-shift"></div>
            </div>
            <div class="info-item">
              <div class="info-label" data-i18n-key="label-start-time">â°é–‹å§‹æ™‚é–“</div>
              <div class="info-value" data-field="session-start-time"></div>
            </div>
            <div class="info-item">
              <div class="info-label" data-i18n-key="label-end-time">â±ï¸çµæŸæ™‚é–“</div>
              <div class="info-value" data-field="session-end-time"></div>
            </div>
            <div class="info-item">
              <div class="info-label" data-i18n-key="label-duration">â³ç¸½é€ææ™‚æ•¸</div>
              <div class="info-value" data-field="session-duration"></div>
            </div>
            <div class="info-item">
              <div class="info-label" data-i18n-key="label-machine">ğŸ–¥ï¸é€ææ©Ÿå‹</div>
              <div class="info-value" data-field="session-machine"></div>
            </div>
            <div class="info-item">
              <div class="info-label" data-i18n-key="label-dialyzer">ğŸ”¬äººå·¥è…è‡Ÿ</div>
              <div class="info-value" data-field="session-dialyzer"></div>
            </div>
            <div class="info-item">
              <div class="info-label" data-i18n-key="label-dialysate">ğŸ§ªé€ææ¶² Ca/K</div>
              <div class="info-value" data-field="session-dialysate"></div>
            </div>
            <div class="info-item">
              <div class="info-label" data-i18n-key="label-dry-weight">âš–ï¸ä¹¾é«”é‡</div>
              <div class="info-value" data-field="session-dry-weight"></div>
            </div>
            <div class="info-item">
              <div class="info-label" data-i18n-key="label-pre-weight">ğŸ“Šé€æå‰é«”é‡</div>
              <div class="info-value" data-field="session-pre-weight"></div>
            </div>
            <div class="info-item">
              <div class="info-label" data-i18n-key="label-uf-plan">ğŸ’§é è¨ˆè„«æ°´é‡</div>
              <div class="info-value" data-field="session-uf-plan"></div>
            </div>
            <div class="info-item">
              <div class="info-label" data-i18n-key="label-uf-actual">ğŸ’¦å¯¦éš›è„«æ°´é‡</div>
              <div class="info-value status-warning" data-field="session-uf-actual"></div>
            </div>
            <div class="info-item">
              <div class="info-label" data-i18n-key="label-qb">ğŸ”´è¡€æµé‡ (Qb)</div>
              <div class="info-value" data-field="session-qb"></div>
            </div>
            <div class="info-item">
              <div class="info-label" data-i18n-key="label-qd">ğŸ’§é€ææ¶²æµé‡ (Qd)</div>
              <div class="info-value" data-field="session-qd"></div>
            </div>
            <div class="info-item">
              <div class="info-label" data-i18n-key="label-heparin">ğŸ’‰æŠ—å‡åŠ‘</div>
              <div class="info-value" data-field="session-heparin"></div>
            </div>
            <div class="info-item">
              <div class="info-label" data-i18n-key="label-access">ğŸ©¸è¡€ç®¡é€šè·¯</div>
              <div class="info-value" data-field="session-access"></div>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-title" data-i18n-key="card-vitals">ğŸ’“ é€æå‰/å¾Œç”Ÿå‘½å¾µè±¡</div>
          <table class="vital-signs-table">
            <thead>
              <tr>
                <th data-i18n-key="th-item">é …ç›®</th>
                <th data-i18n-key="th-pre">é€æå‰</th>
                <th data-i18n-key="th-post">é€æå¾Œ</th>
                <th data-i18n-key="th-status">ç‹€æ…‹</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td data-i18n-key="row-bp-lying">ğŸ©ºè¡€å£“ (è‡¥ä½)</td>
                <td data-field="vital-pre-bp-lying"></td>
                <td data-field="vital-post-bp-lying"></td>
                <td><span class="status-warning" data-field="vital-bp-status"></span></td>
              </tr>
              <tr>
                <td data-i18n-key="row-bp-sitting">ğŸ©ºè¡€å£“ (åä½)</td>
                <td>-</td>
                <td>105/68 mmHg</td>
                <td><span class="status-warning">âš ï¸ åä½</span></td>
              </tr>
              <tr>
                <td data-i18n-key="row-pulse">ğŸ’—è„ˆæ</td>
                <td>78 bpm</td>
                <td>82 bpm</td>
                <td><span class="status-normal">âœ… æ­£å¸¸</span></td>
              </tr>
              <tr>
                <td data-i18n-key="row-rr">ğŸ«å‘¼å¸</td>
                <td>18 /min</td>
                <td>18 /min</td>
                <td><span class="status-normal">âœ… æ­£å¸¸</span></td>
              </tr>
              <tr>
                <td data-i18n-key="row-temp">ğŸŒ¡ï¸ é«”æº«</td>
                <td>36.5Â°C</td>
                <td>36.8Â°C</td>
                <td><span class="status-normal">âœ… æ­£å¸¸</span></td>
              </tr>
              <tr>
                <td data-i18n-key="row-weight">âš–ï¸é«”é‡</td>
                <td>71.0 kg</td>
                <td>68.8 kg</td>
                <td><span class="status-normal">âœ… æ­£å¸¸</span></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="card">
        <div class="card-title" data-i18n-key="card-monitoring">ğŸ“Š é€æéç¨‹ç›£æ¸¬</div>
        <div class="chart-view-toggle">
          <button class="toggle-btn active" onclick="showView('chart')" data-i18n-key="btn-chart-view">åœ–è¡¨è¦–åœ–</button>
          <button class="toggle-btn" onclick="showView('table')" data-i18n-key="btn-table-view">è¡¨æ ¼è¦–åœ–</button>
        </div>
        <div id="chart-view">
          <div class="chart-container">
            <canvas id="monitoringChart"></canvas>
          </div>
        </div>
        <div id="table-view" class="hidden">
          <div style="overflow-x: auto;">
            <table class="monitoring-table">
              <thead>
                <tr>
                  <th>â° æ™‚é–“</th>
                  <th>ğŸ§  æ„è­˜</th>
                  <th>ğŸ©º è¡€å£“<br>(mmHg)</th>
                  <th>ğŸ’“ è„ˆæ<br>(bpm)</th>
                  <th>ğŸ« å‘¼å¸<br>(/min)</th>
                  <th>ğŸ”´ Qb<br>(mL/min)</th>
                  <th>ğŸ“Š éœè„ˆå£“<br>(mmHg)</th>
                  <th>ğŸ’§ UFR<br>(mL/h)</th>
                  <th>ğŸ’¦ ç´¯ç©UF<br>(L)</th>
                  <th>ğŸŒ¡ï¸ é€ææ¶²æº«<br>(Â°C)</th>
                  <th>ğŸ«€ SpOâ‚‚<br>(%)</th>
                  <th>ğŸ©¸ æ»²è¡€</th>
                  <th>âš ï¸ ç‰¹æ®Šæƒ…æ³</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>08:15</td>
                  <td>æ¸…é†’</td>
                  <td>145/85</td>
                  <td>78</td>
                  <td>18</td>
                  <td>300</td>
                  <td>120</td>
                  <td>625</td>
                  <td>0.0</td>
                  <td>36.5</td>
                  <td>98</td>
                  <td>ç„¡</td>
                  <td>é–‹å§‹é€æ</td>
                </tr>
                <tr>
                  <td>09:00</td>
                  <td>æ¸…é†’</td>
                  <td>135/80</td>
                  <td>76</td>
                  <td>18</td>
                  <td>300</td>
                  <td>125</td>
                  <td>625</td>
                  <td>0.6</td>
                  <td>36.5</td>
                  <td>98</td>
                  <td>ç„¡</td>
                  <td>-</td>
                </tr>
                <tr>
                  <td>09:45</td>
                  <td>æ¸…é†’</td>
                  <td class="status-warning">105/65</td>
                  <td>82</td>
                  <td>18</td>
                  <td>300</td>
                  <td>128</td>
                  <td>625</td>
                  <td>1.1</td>
                  <td>36.5</td>
                  <td>98</td>
                  <td>ç„¡</td>
                  <td class="status-warning">ä½è¡€å£“ï¼Œçµ¦äºˆNS 100mL</td>
                </tr>
                <tr>
                  <td>10:30</td>
                  <td>æ¸…é†’</td>
                  <td>120/75</td>
                  <td>80</td>
                  <td>18</td>
                  <td>300</td>
                  <td>130</td>
                  <td>625</td>
                  <td>1.6</td>
                  <td>36.5</td>
                  <td>98</td>
                  <td>ç„¡</td>
                  <td>-</td>
                </tr>
                <tr>
                  <td>11:15</td>
                  <td>æ¸…é†’</td>
                  <td class="status-warning">100/60</td>
                  <td>85</td>
                  <td>18</td>
                  <td>300</td>
                  <td>132</td>
                  <td>400</td>
                  <td>2.0</td>
                  <td>36.5</td>
                  <td>98</td>
                  <td>ç„¡</td>
                  <td class="status-warning">ä½è¡€å£“ï¼Œé™ä½UFRï¼Œçµ¦äºˆMidodrine 5mg</td>
                </tr>
                <tr>
                  <td>12:00</td>
                  <td>æ¸…é†’</td>
                  <td>115/70</td>
                  <td>82</td>
                  <td>18</td>
                  <td>300</td>
                  <td>135</td>
                  <td>400</td>
                  <td>2.2</td>
                  <td>36.5</td>
                  <td>98</td>
                  <td>ç„¡</td>
                  <td>å·¦å°è…¿æŠ½ç­‹ï¼ŒæŒ‰æ‘©ç·©è§£</td>
                </tr>
                <tr>
                  <td>12:15</td>
                  <td>æ¸…é†’</td>
                  <td>110/70</td>
                  <td>82</td>
                  <td>18</td>
                  <td>-</td>
                  <td>-</td>
                  <td>-</td>
                  <td>2.2</td>
                  <td>-</td>
                  <td>98</td>
                  <td>ç„¡</td>
                  <td>çµæŸé€æ</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-title" data-i18n-key="card-notes">ğŸ“ è­·ç†ç´€éŒ„ / äº¤ç­ / é†«å›‘</div>
        <div class="sub-tabs">
          <div class="sub-tab active" onclick="showSubTab('pre-assessment')" data-i18n-key="sub-pre">ğŸ”é€æå‰è©•ä¼°</div>
          <div class="sub-tab" onclick="showSubTab('nursing-notes')" data-i18n-key="sub-nursing">ğŸ“‹è­·ç†ç´€éŒ„</div>
          <div class="sub-tab" onclick="showSubTab('handover')" data-i18n-key="sub-handover">ğŸ”„äº¤ç­äº‹é …</div>
          <div class="sub-tab" onclick="showSubTab('orders')" data-i18n-key="sub-orders">ğŸ’Šé†«å¸«é†«å›‘</div>
        </div>
        <div id="pre-assessment" class="notes-content">
          <div class="note-item">
            <div class="note-time">2024-03-15 08:00 - è­·ç†å¸« ç‹å°æ˜</div>
            <div class="note-text">
              <strong>ä¸‹è‚¢æ°´è…«ï¼š</strong>é›™ä¸‹è‚¢è¼•åº¦æ°´è…« (+1)<br>
              <strong>è‚ºéŸ³ï¼š</strong>é›™å´å‘¼å¸éŸ³æ¸…æ™°ï¼Œç„¡å›‰éŸ³<br>
              <strong>é£²æ°´é‡ä¼°è¨ˆï¼š</strong>æ˜¨æ—¥ç´„1500mL<br>
              <strong>é«”é‡å¢åŠ ï¼š</strong>2.5kg (3.6%)<br>
              <strong>ä¸»è¨´ï¼š</strong>è¼•å¾®å‘¼å¸å–˜ï¼Œæ´»å‹•å¾Œè¼ƒæ˜é¡¯
            </div>
          </div>
        </div>
        <div id="nursing-notes" class="notes-content hidden">
          <div class="note-item">
            <div class="note-time">2024-03-15 09:45</div>
            <div class="note-text">
              é€æé€²è¡Œä¸­å‡ºç¾ä½è¡€å£“ï¼ˆ105/65 mmHgï¼‰ï¼Œç—…äººä¸»è¨´é ­æšˆã€‚ç«‹å³é™ä½UFRè‡³400 mL/hï¼Œçµ¦äºˆNS 100mLå¿«é€Ÿè¼¸æ³¨ï¼Œç—‡ç‹€ç·©è§£ã€‚
            </div>
          </div>
          <div class="note-item">
            <div class="note-time">2024-03-15 11:15</div>
            <div class="note-text">
              å†æ¬¡å‡ºç¾ä½è¡€å£“ï¼ˆ100/60 mmHgï¼‰ï¼Œç—…äººä¸»è¨´é ­æšˆã€å†’å†·æ±—ã€‚é™ä½UFRï¼Œçµ¦äºˆMidodrine 5mgå£æœï¼Œè¡€å£“é€æ¼¸å›å‡è‡³115/70 mmHgã€‚
            </div>
          </div>
          <div class="note-item">
            <div class="note-time">2024-03-15 12:00</div>
            <div class="note-text">
              ç—…äººå·¦å°è…¿å‡ºç¾è‚Œè‚‰æŠ½ç­‹ï¼Œçµ¦äºˆå±€éƒ¨æŒ‰æ‘©åŠä¼¸å±•ï¼Œç—‡ç‹€æ–¼5åˆ†é˜å…§ç·©è§£ã€‚
            </div>
          </div>
          <div class="note-item">
            <div class="note-time">2024-03-15 12:15</div>
            <div class="note-text">
              é€æçµæŸï¼Œå¯¦éš›è„«æ°´é‡2.2Lï¼ˆæœªé”è™•æ–¹é‡2.5Lï¼‰ï¼Œå› ä½è¡€å£“äº‹ä»¶ææ—©çµ‚æ­¢ã€‚ç—…äººç”Ÿå‘½å¾µè±¡ç©©å®šï¼Œç„¡ä¸é©ä¸»è¨´ï¼Œé‡çœ¼ç„¡æ»²è¡€ã€‚
            </div>
          </div>
          <button class="add-note-btn" onclick="addNote()">+ æ–°å¢ç´€éŒ„</button>
        </div>
        <div id="handover" class="notes-content hidden">
          <div class="note-item">
            <div class="note-time">äº¤ç­é‡é»</div>
            <div class="note-text">
              1. æœ¬æ¬¡é€æå› ä½è¡€å£“äº‹ä»¶æœªé”è™•æ–¹è„«æ°´é‡ï¼Œä¸‹æ¬¡é€æéœ€å¯†åˆ‡ç›£æ¸¬è¡€å£“è®ŠåŒ–<br>
              2. ç—…äººå°å¿«é€Ÿè„«æ°´è€å—æ€§å·®ï¼Œå»ºè­°ä¸‹æ¬¡èª¿æ•´UFRé€Ÿåº¦<br>
              3. å·²çµ¦äºˆMidodrineï¼Œä¸‹æ¬¡é€æå‰è«‹è©•ä¼°æ˜¯å¦éœ€è¦é é˜²æ€§çµ¦è—¥<br>
              4. å·¦å°è…¿æ˜“æŠ½ç­‹ï¼Œé€æä¸­è«‹æ³¨æ„ä¿æš–åŠé©æ™‚æŒ‰æ‘©<br>
              5. ä¸‹æ¬¡é€æï¼š2024-03-17ï¼ˆé€±æ—¥ï¼‰æ—©ç­
            </div>
          </div>
          <button class="add-note-btn" onclick="addNote()">+ æ–°å¢äº¤ç­äº‹é …</button>
        </div>
        <div id="orders" class="notes-content hidden">
          <div class="note-item">
            <div class="note-time">2024-03-15 - è¨±é†«å¸«</div>
            <div class="note-text">
              <strong>ğŸ’Šé•·æœŸè™•æ–¹ï¼š</strong><br>
              â€¢ HD 3x/week, 4 hours, Qb 300, Qd 500<br>
              â€¢ Heparin 3000U (loading) + 1000U/h<br>
              â€¢ é€ææ¶²ï¼šCa 2.5, K 2.0<br>
              â€¢ EPO 4000U SC 3x/week<br>
              â€¢ Iron sucrose 100mg IV 1x/week<br><br>
              <strong>âš ï¸æœ¬æ¬¡ç‰¹æ®Šé†«å›‘ï¼š</strong><br>
              â€¢ å› ä½è¡€å£“äº‹ä»¶ï¼Œä¸‹æ¬¡é€æå‰çµ¦äºˆMidodrine 5mg PO<br>
              â€¢ å¯†åˆ‡ç›£æ¸¬è¡€å£“ï¼Œå¿…è¦æ™‚èª¿æ•´ä¹¾é«”é‡
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tab 2: Biochemistry & Anemia -->
    <div class="tab-content" id="biochem-anemia">
      <div class="card">
        <div class="card-title" data-i18n-key="card-biochem-monthly">ğŸ§ª æœˆåº¦ç”ŸåŒ–å€¼è¿½è¹¤</div>
        <div style="overflow-x: auto;">
          <table class="biochem-table">
            <thead>
              <tr>
                <th>æœˆä»½</th>
                <th>Hb<br>(g/dL)</th>
                <th>Hct<br>(%)</th>
                <th>Ferritin<br>(ng/mL)</th>
                <th>TSAT<br>(%)</th>
                <th>BUN<br>(mg/dL)</th>
                <th>Cr<br>(mg/dL)</th>
                <th>Na<br>(mEq/L)</th>
                <th>K<br>(mEq/L)</th>
                <th>Ca<br>(mg/dL)</th>
                <th>P<br>(mg/dL)</th>
                <th>Albumin<br>(g/dL)</th>
                <th>CRP<br>(mg/L)</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2024-03</td>
                <td class="value-warning">9.8</td>
                <td class="value-warning">29.5</td>
                <td class="value-normal">285</td>
                <td class="value-normal">32</td>
                <td class="value-normal">68</td>
                <td class="value-normal">10.2</td>
                <td class="value-normal">138</td>
                <td class="value-normal">4.8</td>
                <td class="value-normal">9.2</td>
                <td class="value-warning">5.8</td>
                <td class="value-normal">3.8</td>
                <td class="value-warning">8.5</td>
              </tr>
              <tr>
                <td>2024-02</td>
                <td class="value-warning">9.5</td>
                <td class="value-warning">28.8</td>
                <td class="value-normal">265</td>
                <td class="value-normal">30</td>
                <td class="value-normal">72</td>
                <td class="value-normal">10.5</td>
                <td class="value-normal">139</td>
                <td class="value-normal">4.6</td>
                <td class="value-normal">9.0</td>
                <td class="value-danger">6.2</td>
                <td class="value-normal">3.7</td>
                <td class="value-warning">9.2</td>
              </tr>
              <tr>
                <td>2024-01</td>
                <td class="value-danger">9.2</td>
                <td class="value-danger">27.5</td>
                <td class="value-warning">220</td>
                <td class="value-warning">28</td>
                <td class="value-normal">70</td>
                <td class="value-normal">10.8</td>
                <td class="value-normal">137</td>
                <td class="value-normal">4.9</td>
                <td class="value-normal">8.8</td>
                <td class="value-danger">6.5</td>
                <td class="value-normal">3.6</td>
                <td class="value-danger">12.5</td>
              </tr>
              <tr>
                <td>2023-12</td>
                <td class="value-normal">10.2</td>
                <td class="value-normal">30.8</td>
                <td class="value-normal">295</td>
                <td class="value-normal">35</td>
                <td class="value-normal">65</td>
                <td class="value-normal">9.8</td>
                <td class="value-normal">140</td>
                <td class="value-normal">4.5</td>
                <td class="value-normal">9.5</td>
                <td class="value-warning">5.5</td>
                <td class="value-normal">3.9</td>
                <td class="value-normal">5.8</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div style="margin-top: 16px; padding: 12px; background: #f8fafc; border-radius: 6px; font-size: 13px;">
          <strong>ç›®æ¨™ç¯„åœï¼š</strong> Hb 10-12 g/dL | Ferritin 200-500 ng/mL | TSAT 20-50% | P 3.5-5.5 mg/dL | Albumin â‰¥3.5 g/dL | CRP &lt;5 mg/L
        </div>
      </div>

      <div class="two-column-layout">
        <div class="card">
          <div class="card-title" data-i18n-key="card-anemia-trend">ğŸ“ˆ è²§è¡€æŒ‡æ¨™è¶¨å‹¢</div>
          <div class="trend-chart-small">
            <canvas id="anemiaChart"></canvas>
          </div>
        </div>
        <div class="card">
          <div class="card-title" data-i18n-key="card-anemia-treatment">ğŸ’‰ è²§è¡€æ²»ç™‚ç´€éŒ„</div>
          <div class="info-grid">
            <div class="info-item">
              <div class="info-label">ğŸ’ŠESA ç¨®é¡</div>
              <div class="info-value">Epoetin alfa</div>
            </div>
            <div class="info-item">
              <div class="info-label">ğŸ“ç›®å‰åŠ‘é‡</div>
              <div class="info-value">4000U SC</div>
            </div>
            <div class="info-item">
              <div class="info-label">ğŸ”çµ¦è—¥é »ç‡</div>
              <div class="info-value">3æ¬¡/é€±</div>
            </div>
            <div class="info-item">
              <div class="info-label">éµåŠ‘ç¨®é¡</div>
              <div class="info-value">Iron sucrose</div>
            </div>
            <div class="info-item">
              <div class="info-label">ğŸ’‰éµåŠ‘åŠ‘é‡</div>
              <div class="info-value">100mg IV</div>
            </div>
            <div class="info-item">
              <div class="info-label">ğŸ”çµ¦è—¥é »ç‡</div>
              <div class="info-value">1æ¬¡/é€±</div>
            </div>
          </div>
          <div style="margin-top: 16px; padding: 12px; background: #fef3c7; border-radius: 6px; border-left: 3px solid #f59e0b;">
            <div style="font-size: 13px; color: #92400e;">
              <strong>âš ï¸ ç³»çµ±æé†’ï¼š</strong><br>
              â€¢ é€£çºŒ3æ¬¡ Hb &lt; 10 g/dLï¼Œå»ºè­°è©•ä¼°ESAåŠ‘é‡<br>
              â€¢ CRPåé«˜ï¼Œå¯èƒ½å½±éŸ¿ESAåæ‡‰æ€§
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Tab 3: Dialysis Efficiency & Bone Disease -->
    <div class="tab-content" id="dialysis-efficiency">
      <div class="two-column-layout">
        <div class="card">
          <div class="card-title" data-i18n-key="card-efficiency">âš¡ é€ææ•ˆèƒ½æŒ‡æ¨™</div>
          <div class="trend-chart-small">
            <canvas id="ktVChart"></canvas>
          </div>
          <div style="margin-top: 16px; padding: 12px; background: #dcfce7; border-radius: 6px;">
            <div style="font-size: 13px; color: #166534;">
              <strong>âœ… é€ææ•ˆèƒ½è‰¯å¥½</strong><br>
              æœ€è¿‘3å€‹æœˆ Kt/V å¹³å‡ï¼š1.45ï¼ˆç›®æ¨™ â‰¥1.2ï¼‰
            </div>
          </div>
        </div>
        <div class="card">
          <div class="card-title" data-i18n-key="card-bone">ğŸ¦´ éª¨ç¤¦ç‰©è³ªä»£è¬ (CKD-MBD)</div>
          <div class="trend-chart-small">
            <canvas id="ckdMbdChart"></canvas>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-title" data-i18n-key="card-mbd-medications">ğŸ’Š ç›¸é—œç”¨è—¥ç´€éŒ„</div>
        <div style="overflow-x: auto;">
          <table class="biochem-table">
            <thead>
              <tr>
                <th>è—¥ç‰©é¡åˆ¥</th>
                <th>è—¥ç‰©åç¨±</th>
                <th>åŠ‘é‡</th>
                <th>é »ç‡</th>
                <th>é–‹å§‹æ—¥æœŸ</th>
                <th>èª¿æ•´ç´€éŒ„</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>ç£·çµåˆåŠ‘</td>
                <td>Calcium carbonate</td>
                <td>500mg</td>
                <td>TID AC</td>
                <td>2023-01-15</td>
                <td>2024-02-01 å› Påé«˜å¢é‡</td>
              </tr>
              <tr>
                <td>æ´»æ€§ç¶­ç”Ÿç´ D</td>
                <td>Calcitriol</td>
                <td>0.25mcg</td>
                <td>QD</td>
                <td>2023-03-20</td>
                <td>-</td>
              </tr>
              <tr>
                <td>æ“¬éˆ£åŠ‘</td>
                <td>Cinacalcet</td>
                <td>30mg</td>
                <td>QD</td>
                <td>2023-08-10</td>
                <td>2024-01-15 å› iPTHåé«˜é–‹å§‹ä½¿ç”¨</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Tab 4: Vascular Access -->
    <div class="tab-content" id="vascular-access">
      <div class="two-column-layout">
        <div class="card">
          <div class="card-title" data-i18n-key="card-vascular-current">ğŸ©¸ ç¾è¡Œè¡€ç®¡é€šè·¯è³‡è¨Š</div>
          <div class="info-grid">
            <div class="info-item">
              <div class="info-label">ğŸ”–é€šè·¯ç¨®é¡</div>
              <div class="info-value">AVF (å‹•éœè„ˆç˜»ç®¡)</div>
            </div>
            <div class="info-item">
              <div class="info-label">ğŸ“éƒ¨ä½èˆ‡å´åˆ¥</div>
              <div class="info-value">å·¦å‰è‡‚æ©ˆå´</div>
            </div>
            <div class="info-item">
              <div class="info-label">ğŸ“…å»ºç«‹æ—¥æœŸ</div>
              <div class="info-value">2018-01-15</div>
            </div>
            <div class="info-item">
              <div class="info-label">ğŸ¯é¦–æ¬¡ä½¿ç”¨</div>
              <div class="info-value">2018-03-20</div>
            </div>
            <div class="info-item">
              <div class="info-label">â³ä½¿ç”¨å¹´é™</div>
              <div class="info-value">6å¹´2å€‹æœˆ</div>
            </div>
            <div class="info-item">
              <div class="info-label">ğŸ”æœ€è¿‘è©•ä¼°</div>
              <div class="info-value">2024-03-15</div>
            </div>
          </div>
          <div style="margin-top: 16px; padding: 12px; background: #dcfce7; border-radius: 6px;">
            <div style="font-size: 13px; color: #166534;">
              <strong>âœ… é€šè·¯åŠŸèƒ½è‰¯å¥½</strong><br>
              Thrill (+) / Bruit (+) | è¡€æµé‡ç©©å®šé”æ¨™ | ç„¡ç•°å¸¸å£“åŠ›
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-title" data-i18n-key="card-vascular-recent-eval">ğŸ“‹ æœ€è¿‘è©•ä¼°ç´€éŒ„</div>
          <table class="vital-signs-table">
            <thead>
              <tr>
                <th>ğŸ“… æ—¥æœŸ</th>
                <th>ğŸ‘‹ Thrill/Bruit</th>
                <th>ğŸ”´ Qbé”æˆ</th>
                <th>ğŸ“Š éœè„ˆå£“</th>
                <th>ğŸ’‰ é‡çœ¼ç‹€æ³</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2024-03-15</td>
                <td class="status-normal">âœ… æ­£å¸¸</td>
                <td class="status-normal">âœ… 300</td>
                <td class="status-normal">æ­£å¸¸</td>
                <td class="status-normal">ç„¡æ»²è¡€</td>
              </tr>
              <tr>
                <td>2024-03-13</td>
                <td class="status-normal">âœ… æ­£å¸¸</td>
                <td class="status-normal">âœ… 300</td>
                <td class="status-normal">æ­£å¸¸</td>
                <td class="status-normal">ç„¡æ»²è¡€</td>
              </tr>
              <tr>
                <td>2024-03-11</td>
                <td class="status-normal">âœ… æ­£å¸¸</td>
                <td class="status-normal">âœ… 300</td>
                <td class="status-warning">âš ï¸ åé«˜</td>
                <td class="status-normal">ç„¡æ»²è¡€</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="card">
        <div class="card-title" data-i18n-key="card-vascular-intervention">ğŸ”§ ä»‹å…¥æ²»ç™‚èˆ‡æ‰‹è¡“ç´€éŒ„</div>
        <div class="access-timeline">
          <div class="timeline-item">
            <div class="timeline-date">2023-08-15</div>
            <div class="timeline-content">
              <strong>PTA (ç¶“çš®è¡€ç®¡æˆå½¢è¡“)</strong><br>
              åŸå› ï¼šéœè„ˆå£“æŒçºŒåé«˜ï¼Œæ‡·ç–‘ç‹¹çª„<br>
              çµæœï¼šæˆåŠŸæ“´å¼µéœè„ˆç«¯ç‹¹çª„è™•ï¼Œè¡€æµæ¢å¾©è‰¯å¥½
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-date">2021-03-20</div>
            <div class="timeline-content">
              <strong>é€šè·¯ä¿®è£œæ‰‹è¡“</strong><br>
              åŸå› ï¼šå‹•è„ˆç«¯å‡æ€§å‹•è„ˆç˜¤å½¢æˆ<br>
              çµæœï¼šæˆåŠŸä¿®è£œï¼Œé€šè·¯åŠŸèƒ½ç¶­æŒ
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-date">2018-01-15</div>
            <div class="timeline-content">
              <strong>AVFå»ºç«‹æ‰‹è¡“</strong><br>
              éƒ¨ä½ï¼šå·¦å‰è‡‚æ©ˆå´å‹•éœè„ˆç˜»ç®¡<br>
              è¡“è€…ï¼šè¡€ç®¡å¤–ç§‘ æ—é†«å¸«
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-title" data-i18n-key="card-vascular-history">ğŸ“œ æ­·å²é€šè·¯ç´€éŒ„</div>
        <table class="vital-signs-table">
          <thead>
            <tr>
              <th>ğŸ”– é€šè·¯ç¨®é¡</th>
              <th>ğŸ“ éƒ¨ä½</th>
              <th>ğŸ“… ä½¿ç”¨æœŸé–“</th>
              <th>âš ï¸ çµ‚æ­¢åŸå› </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>AVF</td>
              <td>å·¦å‰è‡‚æ©ˆå´</td>
              <td>2018-03 ~ ä½¿ç”¨ä¸­</td>
              <td>-</td>
            </tr>
            <tr>
              <td>CVC (è‡¨æ™‚)</td>
              <td>å³å…§é ¸éœè„ˆ</td>
              <td>2018-01 ~ 2018-03</td>
              <td>AVFæˆç†Ÿå¾Œç§»é™¤</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Tab 5: Infection & Screening -->
    <div class="tab-content" id="infection-screening">
      <div class="card">
        <div class="card-title" data-i18n-key="card-infection-screen">ğŸ¦  ç—…æ¯’/æ„ŸæŸ“ç¯©æª¢ç´€éŒ„</div>
        <div class="screening-grid">
          <div class="screening-card">
            <div class="screening-name">HBsAg (Bå‹è‚ç‚è¡¨é¢æŠ—åŸ)</div>
            <div class="screening-result">
              çµæœï¼š<span class="value-normal">é™°æ€§ (-)</span>
            </div>
            <div class="screening-date">æª¢é©—æ—¥æœŸï¼š2024-03-01</div>
            <div class="screening-date">ä¸‹æ¬¡æ‡‰æª¢ï¼š2024-09-01</div>
          </div>
          <div class="screening-card">
            <div class="screening-name">Anti-HBs (Bå‹è‚ç‚è¡¨é¢æŠ—é«”)</div>
            <div class="screening-result">
              çµæœï¼š<span class="value-normal">é™½æ€§ (125 mIU/mL)</span>
            </div>
            <div class="screening-date">æª¢é©—æ—¥æœŸï¼š2024-03-01</div>
            <div class="screening-date">æŠ—é«”æ•ˆåƒ¹è¶³å¤ </div>
          </div>
          <div class="screening-card">
            <div class="screening-name">Anti-HCV (Cå‹è‚ç‚æŠ—é«”)</div>
            <div class="screening-result">
              çµæœï¼š<span class="value-normal">é™°æ€§ (-)</span>
            </div>
            <div class="screening-date">æª¢é©—æ—¥æœŸï¼š2024-03-01</div>
            <div class="screening-date">ä¸‹æ¬¡æ‡‰æª¢ï¼š2024-09-01</div>
          </div>
          <div class="screening-card">
            <div class="screening-name">HIV (æ„›æ»‹ç—…æ¯’æŠ—é«”)</div>
            <div class="screening-result">
              çµæœï¼š<span class="value-normal">é™°æ€§ (-)</span>
            </div>
            <div class="screening-date">æª¢é©—æ—¥æœŸï¼š2024-01-15</div>
            <div class="screening-date">ä¸‹æ¬¡æ‡‰æª¢ï¼š2025-01-15</div>
          </div>
          <div class="screening-card">
            <div class="screening-name">Syphilis (æ¢…æ¯’è¡€æ¸…)</div>
            <div class="screening-result">
              çµæœï¼š<span class="value-normal">é™°æ€§ (-)</span>
            </div>
            <div class="screening-date">æª¢é©—æ—¥æœŸï¼š2024-01-15</div>
            <div class="screening-date">ä¸‹æ¬¡æ‡‰æª¢ï¼š2025-01-15</div>
          </div>
        </div>
      </div>

      <div class="two-column-layout">
        <div class="card">
          <div class="card-title" data-i18n-key="card-vaccine">ğŸ’‰ ç–«è‹—æ¥ç¨®ç´€éŒ„</div>
          <table class="vital-signs-table">
            <thead>
              <tr>
                <th>ğŸ’‰ ç–«è‹—ç¨®é¡</th>
                <th>ğŸ“… æ¥ç¨®æ—¥æœŸ</th>
                <th>âœ… ç‹€æ…‹</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Bå‹è‚ç‚ç–«è‹—</td>
                <td>2018-02-15 (å®Œæ•´3åŠ‘)</td>
                <td class="status-normal">âœ… æœ‰æ•ˆ</td>
              </tr>
              <tr>
                <td>æµæ„Ÿç–«è‹—</td>
                <td>2023-10-20</td>
                <td class="status-warning">âš ï¸ éœ€æ›´æ–°</td>
              </tr>
              <tr>
                <td>COVID-19ç–«è‹—</td>
                <td>2023-09-15 (ç¬¬4åŠ‘)</td>
                <td class="status-normal">âœ… å·²æ¥ç¨®</td>
              </tr>
              <tr>
                <td>è‚ºç‚éˆçƒèŒç–«è‹—</td>
                <td>2022-05-10</td>
                <td class="status-normal">âœ… å·²æ¥ç¨®</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="card">
          <div class="card-title" data-i18n-key="card-infection-events">ğŸš¨ æ„ŸæŸ“äº‹ä»¶åˆ—è¡¨</div>
          <div class="access-timeline">
            <div class="timeline-item">
              <div class="timeline-date">2023-11-20</div>
              <div class="timeline-content">
                <strong>ä¸Šå‘¼å¸é“æ„ŸæŸ“</strong><br>
                ç—‡ç‹€ï¼šç™¼ç‡’ã€å’³å—½ã€æµé¼»æ°´<br>
                è™•ç½®ï¼šé–€è¨ºæ²»ç™‚ï¼ŒæŠ—ç”Ÿç´ 7å¤©<br>
                èˆ‡é€æç›¸é—œï¼šå¦
              </div>
            </div>
            <div class="timeline-item">
              <div class="timeline-date">2022-08-15</div>
              <div class="timeline-content">
                <strong>é€šè·¯æ„ŸæŸ“</strong><br>
                ç—‡ç‹€ï¼šé‡çœ¼ç´…è…«ã€ç™¼ç‡’<br>
                èŒç¨®ï¼šStaphylococcus aureus<br>
                è™•ç½®ï¼šæŠ—ç”Ÿç´ æ²»ç™‚14å¤©ï¼Œé€šè·¯ä¿ç•™<br>
                èˆ‡é€æç›¸é—œï¼šæ˜¯
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-title" data-i18n-key="card-isolation">ğŸ›¡ï¸ éš”é›¢èˆ‡æ„ŸæŸ“æ§åˆ¶æªæ–½</div>
        <div style="padding: 16px; background: #f8fafc; border-radius: 8px;">
          <div style="font-size: 14px; color: #1e293b; line-height: 1.8;">
            <strong>ç›®å‰ç‹€æ…‹ï¼š</strong><span class="status-normal" style="margin-left: 8px;">âœ… ç„¡éœ€éš”é›¢</span><br>
            <strong>æ¨™æº–é˜²è­·æªæ–½ï¼š</strong>å·²è½å¯¦<br>
            <strong>å°ˆç”¨æ©Ÿå™¨ï¼š</strong>å¦<br>
            <strong>å°ˆç”¨åºŠä½ï¼š</strong>å¦<br>
            <strong>å‚™è¨»ï¼š</strong>å®šæœŸç¯©æª¢æ­£å¸¸ï¼Œç„¡æ„ŸæŸ“é¢¨éšª
          </div>
        </div>
      </div>
    </div>

    <!-- Tab 6: AI Prediction -->
    <div class="tab-content" id="ai-prediction">
      <div class="ai-prediction-grid">
        <div class="prediction-card">
          <div class="prediction-title" data-i18n-key="pred-bmd">ğŸ¦´ éª¨å¯†åº¦é æ¸¬</div>
          <div class="prediction-value">T-score: -2.1</div>
          <div class="prediction-subtitle">é æ¸¬å€é–“ï¼š-1.8 ~ -2.4</div>
          <div class="risk-indicator risk-medium" data-i18n-key="pred-bmd-risk">éª¨è³ªç–é¬†å‰æœŸ</div>
          <div style="margin-top: 16px; font-size: 13px; color: #64748b;">
            æ ¹æ“š Ca/P/iPTHã€å¹´é½¡ã€æ€§åˆ¥ã€é€æå¹´è³‡ã€é«”é‡ç­‰å› å­æ¨ä¼°
          </div>
        </div>
        <div class="prediction-card">
          <div class="prediction-title" data-i18n-key="pred-uf">ğŸ’§ å»ºè­°è„«æ°´é‡</div>
          <div class="prediction-value">2.1 - 2.4 L</div>
          <div class="prediction-subtitle" data-i18n-key="pred-uf-prescription">é†«å¸«è™•æ–¹ï¼š2.5 L</div>
          <div class="risk-indicator risk-warning" data-i18n-key="pred-uf-risk">âš ï¸ å·®è· +0.2L</div>
          <div style="margin-top: 16px; font-size: 13px; color: #64748b;">
            å»ºè­°ï¼šè€ƒæ…®é™ä½è„«æ°´é‡æˆ–å»¶é•·é€ææ™‚é–“ï¼Œä»¥æ¸›å°‘ä½è¡€å£“é¢¨éšª
          </div>
        </div>
        <div class="prediction-card">
          <div class="prediction-title" data-i18n-key="pred-cramp">ğŸ¦µ æŠ½ç­‹é¢¨éšªé æ¸¬</div>
          <div class="prediction-value">68%</div>
          <div class="prediction-subtitle" data-i18n-key="pred-cramp-period">æœ¬æ¬¡é€ææœŸé–“</div>
          <div class="risk-indicator risk-high" data-i18n-key="pred-cramp-risk">é«˜é¢¨éšª</div>
          <div style="margin-top: 16px; font-size: 13px; color: #64748b;">
            ä¸‹è‚¢æŠ½ç­‹é¢¨éšªè¼ƒé«˜ï¼Œå»ºè­°é é˜²æªæ–½
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-title" data-i18n-key="card-ai-input-summary">ğŸ” æ¨¡å‹è¼¸å…¥æ‘˜è¦</div>
        <div class="info-grid">
          <div class="info-item">
            <div class="info-label">æœ€è¿‘é«”é‡è®ŠåŒ–</div>
            <div class="info-value">+2.5 kg (3.6%)</div>
          </div>
          <div class="info-item">
            <div class="info-label">æœ€è¿‘ä½è¡€å£“äº‹ä»¶</div>
            <div class="info-value">3æ¬¡/æœ€è¿‘5æ¬¡é€æ</div>
          </div>
          <div class="info-item">
            <div class="info-label">æœ€è¿‘æŠ½ç­‹äº‹ä»¶</div>
            <div class="info-value">2æ¬¡/æœ€è¿‘5æ¬¡é€æ</div>
          </div>
          <div class="info-item">
            <div class="info-label">è¡€æ¸…éˆ‰</div>
            <div class="info-value">138 mEq/L</div>
          </div>
          <div class="info-item">
            <div class="info-label">è¡€æ¸…é‰€</div>
            <div class="info-value">4.8 mEq/L</div>
          </div>
          <div class="info-item">
            <div class="info-label">è¡€æ¸…éˆ£</div>
            <div class="info-value">9.2 mg/dL</div>
          </div>
          <div class="info-item">
            <div class="info-label">è¡€æ¸…ç£·</div>
            <div class="info-value">5.8 mg/dL</div>
          </div>
          <div class="info-item">
            <div class="info-label">ç™½è›‹ç™½</div>
            <div class="info-value">3.8 g/dL</div>
          </div>
          <div class="info-item">
            <div class="info-label">è¡€ç´…ç´ </div>
            <div class="info-value">9.8 g/dL</div>
          </div>
          <div class="info-item">
            <div class="info-label">é€æå¹´è³‡</div>
            <div class="info-value">6å¹´</div>
          </div>
          <div class="info-item">
            <div class="info-label">BMI</div>
            <div class="info-value">24.8 kg/mÂ²</div>
          </div>
          <div class="info-item">
            <div class="info-label">å¹´é½¡</div>
            <div class="info-value">65æ­²</div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-title" data-i18n-key="card-ai-factor-analysis">ğŸ“Š å½±éŸ¿å› å­åˆ†æ</div>
        <div style="margin-bottom: 24px;">
          <h4 style="font-size: 15px; color: #1e293b; margin-bottom: 12px;">æŠ½ç­‹é¢¨éšªä¸»è¦å½±éŸ¿å› å­</h4>
          <div class="feature-importance">
            <div class="feature-bar">
              <div class="feature-label">é«˜è„«æ°´é‡</div>
              <div class="feature-bar-bg">
                <div class="feature-bar-fill" style="width: 85%;"></div>
              </div>
            </div>
            <div class="feature-bar">
              <div class="feature-label">ä½è¡€éˆ‰</div>
              <div class="feature-bar-bg">
                <div class="feature-bar-fill" style="width: 72%;"></div>
              </div>
            </div>
            <div class="feature-bar">
              <div class="feature-label">éå»æŠ½ç­‹å²</div>
              <div class="feature-bar-bg">
                <div class="feature-bar-fill" style="width: 68%;"></div>
              </div>
            </div>
            <div class="feature-bar">
              <div class="feature-label">ä½ç™½è›‹ç™½</div>
              <div class="feature-bar-bg">
                <div class="feature-bar-fill" style="width: 45%;"></div>
              </div>
            </div>
            <div class="feature-bar">
              <div class="feature-label">å¿«é€ŸUFR</div>
              <div class="feature-bar-bg">
                <div class="feature-bar-fill" style="width: 38%;"></div>
              </div>
            </div>
          </div>
        </div>

        <div>
          <h4 style="font-size: 15px; color: #1e293b; margin-bottom: 12px;">éª¨å¯†åº¦é æ¸¬ä¸»è¦å½±éŸ¿å› å­</h4>
          <div class="feature-importance">
            <div class="feature-bar">
              <div class="feature-label">å¹´é½¡</div>
              <div class="feature-bar-bg">
                <div class="feature-bar-fill" style="width: 90%;"></div>
              </div>
            </div>
            <div class="feature-bar">
              <div class="feature-label">é€æå¹´è³‡</div>
              <div class="feature-bar-bg">
                <div class="feature-bar-fill" style="width: 78%;"></div>
              </div>
            </div>
            <div class="feature-bar">
              <div class="feature-label">é«˜iPTH</div>
              <div class="feature-bar-bg">
                <div class="feature-bar-fill" style="width: 65%;"></div>
              </div>
            </div>
            <div class="feature-bar">
              <div class="feature-label">é«˜è¡€ç£·</div>
              <div class="feature-bar-bg">
                <div class="feature-bar-fill" style="width: 52%;"></div>
              </div>
            </div>
            <div class="feature-bar">
              <div class="feature-label">æ€§åˆ¥(ç”·)</div>
              <div class="feature-bar-bg">
                <div class="feature-bar-fill" style="width: 42%;"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="card-title" data-i18n-key="card-ai-history-vs-actual">ğŸ“ˆ æ­·å²é æ¸¬ vs å¯¦éš›çµæœ</div>
        <div style="overflow-x: auto;">
          <table class="biochem-table">
            <thead>
              <tr>
                <th>æ—¥æœŸ</th>
                <th>é æ¸¬æŠ½ç­‹é¢¨éšª</th>
                <th>å¯¦éš›æŠ½ç­‹</th>
                <th>é æ¸¬UF (L)</th>
                <th>å¯¦éš›UF (L)</th>
                <th>èª¤å·®</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>2024-03-15</td>
                <td class="value-danger">é«˜ (68%)</td>
                <td class="value-danger">æ˜¯</td>
                <td>2.1-2.4</td>
                <td>2.2</td>
                <td class="value-normal">âœ… æº–ç¢º</td>
              </tr>
              <tr>
                <td>2024-03-13</td>
                <td class="value-warning">ä¸­ (45%)</td>
                <td class="value-normal">å¦</td>
                <td>2.3-2.6</td>
                <td>2.5</td>
                <td class="value-normal">âœ… æº–ç¢º</td>
              </tr>
              <tr>
                <td>2024-03-11</td>
                <td class="value-danger">é«˜ (72%)</td>
                <td class="value-danger">æ˜¯</td>
                <td>2.0-2.3</td>
                <td>2.4</td>
                <td class="value-warning">âš ï¸ +0.1L</td>
              </tr>
              <tr>
                <td>2024-03-08</td>
                <td class="value-normal">ä½ (25%)</td>
                <td class="value-normal">å¦</td>
                <td>2.2-2.5</td>
                <td>2.3</td>
                <td class="value-normal">âœ… æº–ç¢º</td>
              </tr>
              <tr>
                <td>2024-03-06</td>
                <td class="value-warning">ä¸­ (52%)</td>
                <td class="value-normal">å¦</td>
                <td>2.4-2.7</td>
                <td>2.6</td>
                <td class="value-normal">âœ… æº–ç¢º</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div style="margin-top: 16px; padding: 12px; background: #f8fafc; border-radius: 6px; font-size: 13px;">
          <strong>æ¨¡å‹æº–ç¢ºåº¦ï¼š</strong> æŠ½ç­‹é æ¸¬æº–ç¢ºç‡ 82% | UFé æ¸¬å¹³å‡èª¤å·® Â±0.15L
        </div>
      </div>

      <div class="card">
        <div class="card-title" data-i18n-key="card-ai-suggestions">ğŸ’¡ å»ºè­°èˆ‡æ³¨æ„äº‹é …</div>
        <div style="background: #fef3c7; border-left: 4px solid #f59e0b; padding: 16px; border-radius: 6px; margin-bottom: 16px;">
          <h4 style="font-size: 14px; font-weight: 600; color: #92400e; margin-bottom: 8px;">âš ï¸ æŠ½ç­‹é¢¨éšªåé«˜å»ºè­°</h4>
          <ul style="margin: 0; padding-left: 20px; color: #92400e; font-size: 13px; line-height: 1.8;">
            <li>è€ƒæ…®é™ä½å–®æ¬¡è„«æ°´é‡è‡³2.0-2.2L</li>
            <li>å¯è©•ä¼°å»¶é•·é€ææ™‚é–“è‡³4.5å°æ™‚</li>
            <li>æé†’ç—…äººé€æå‰é¿å…éåº¦ç¦é£Ÿ</li>
            <li>é€æä¸­æ³¨æ„ä¸‹è‚¢ä¿æš–</li>
            <li>å¿…è¦æ™‚å¯é é˜²æ€§çµ¦äºˆéˆ£åŠ‘æˆ–èª¿æ•´é€ææ¶²éˆ£æ¿ƒåº¦</li>
          </ul>
        </div>
        <div style="background: #fee2e2; border-left: 4px solid #ef4444; padding: 16px; border-radius: 6px; margin-bottom: 16px;">
          <h4 style="font-size: 14px; font-weight: 600; color: #991b1b; margin-bottom: 8px;">ğŸ¦´ éª¨å¯†åº¦åä½é¢¨éšªå»ºè­°</h4>
          <ul style="margin: 0; padding-left: 20px; color: #991b1b; font-size: 13px; line-height: 1.8;">
            <li>å»ºè­°å®‰æ’æ­£å¼éª¨å¯†åº¦æª¢æŸ¥(DXA)ç¢ºèª</li>
            <li>æª¢è¨Ca/P/iPTHæ§åˆ¶ï¼Œè€ƒæ…®èª¿æ•´ç”¨è—¥</li>
            <li>è©•ä¼°ç¶­ç”Ÿç´ Dè£œå……æ˜¯å¦è¶³å¤ </li>
            <li>è¡›æ•™ç—…äººæ³¨æ„è·Œå€’é é˜²</li>
            <li>å¿…è¦æ™‚æœƒè¨ºéª¨ç§‘æˆ–å…§åˆ†æ³Œç§‘</li>
          </ul>
        </div>
        <div style="background: #dbeafe; border-left: 4px solid #2563eb; padding: 16px; border-radius: 6px;">
          <h4 style="font-size: 14px; font-weight: 600; color: #1e40af; margin-bottom: 8px;">ğŸ’§ è„«æ°´é‡å»ºè­°</h4>
          <ul style="margin: 0; padding-left: 20px; color: #1e40af; font-size: 13px; line-height: 1.8;">
            <li>å»ºè­°è„«æ°´é‡2.1-2.4Lè¼ƒç‚ºå®‰å…¨</li>
            <li>ç›®å‰è™•æ–¹2.5Lç•¥é«˜ï¼Œå¯èƒ½å¢åŠ ä½è¡€å£“é¢¨éšª</li>
            <li>å»ºè­°èˆ‡é†«å¸«è¨è«–èª¿æ•´è™•æ–¹æˆ–å»¶é•·é€ææ™‚é–“</li>
            <li>å¯†åˆ‡ç›£æ¸¬é€æä¸­è¡€å£“è®ŠåŒ–</li>
          </ul>
        </div>
      </div>

      <div class="disclaimer">
        <strong>âš ï¸ é‡è¦è²æ˜ï¼š</strong> æ­¤AIé æ¸¬çµæœåƒ…ä¾›è‡¨åºŠè¼”åŠ©åƒè€ƒï¼Œä¸å–ä»£é†«å¸«çš„å°ˆæ¥­åˆ¤æ–·èˆ‡æ±ºç­–ã€‚æ‰€æœ‰æ²»ç™‚æ–¹æ¡ˆçš„èª¿æ•´ä»éœ€ç”±ä¸»æ²»é†«å¸«è©•ä¼°å¾Œæ±ºå®šã€‚
      </div>
    </div>

    <!-- Tab 7: Statistics & Quality -->
    <div class="tab-content" id="statistics">
      <div class="card">
        <div class="card-title" data-i18n-key="card-stats-overview">ğŸ“Š æ•´é«”å“è³ªæŒ‡æ¨™ç¸½è¦½</div>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value">1.42</div>
            <div class="stat-label" data-i18n-key="stat-ktv">å¹³å‡ Kt/V</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">78%</div>
            <div class="stat-label" data-i18n-key="stat-hb">Hb é”æ¨™ç‡</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">65%</div>
            <div class="stat-label" data-i18n-key="stat-p">P æ§åˆ¶é”æ¨™ç‡</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">8.5%</div>
            <div class="stat-label" data-i18n-key="stat-hypotension">ä½è¡€å£“äº‹ä»¶ç‡</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">5.2%</div>
            <div class="stat-label" data-i18n-key="stat-cramp">æŠ½ç­‹äº‹ä»¶ç‡</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">2.1%</div>
            <div class="stat-label" data-i18n-key="stat-early-stop">æå‰çµ‚æ­¢ç‡</div>
          </div>
        </div>
      </div>

      <div class="two-column-layout">
        <div class="card">
          <div class="card-title" data-i18n-key="card-quality-trend">ğŸ“ˆ å“è³ªæŒ‡æ¨™è¶¨å‹¢ (æœˆåº¦)</div>
          <div class="trend-chart-small">
            <canvas id="qualityTrendChart"></canvas>
          </div>
        </div>
        <div class="card">
          <div class="card-title" data-i18n-key="card-events-month">ğŸš¨ äº‹ä»¶çµ±è¨ˆ (æœ¬æœˆ)</div>
          <table class="vital-signs-table">
            <thead>
              <tr>
                <th>äº‹ä»¶é¡å‹</th>
                <th>æ¬¡æ•¸</th>
                <th>è¼ƒä¸Šæœˆ</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>é€šè·¯è¡€æ “</td>
                <td>2</td>
                <td class="status-normal">â†“ -1</td>
              </tr>
              <tr>
                <td>PTAä»‹å…¥</td>
                <td>3</td>
                <td class="status-normal">â†’ 0</td>
              </tr>
              <tr>
                <td>èŒè¡€ç—‡</td>
                <td>1</td>
                <td class="status-normal">â†“ -1</td>
              </tr>
              <tr>
                <td>é€šè·¯æ„ŸæŸ“</td>
                <td>2</td>
                <td class="status-warning">â†‘ +1</td>
              </tr>
              <tr>
                <td>è½‰æ€¥è¨º</td>
                <td>4</td>
                <td class="status-normal">â†“ -2</td>
              </tr>
              <tr>
                <td>ä½é™¢</td>
                <td>6</td>
                <td class="status-normal">â†’ 0</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <div class="card">
        <div class="card-title" data-i18n-key="card-ai-performance">ğŸ¤– AI æ¨¡å‹æ•´é«”è¡¨ç¾</div>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value">82%</div>
            <div class="stat-label" data-i18n-key="stat-ai-cramp">æŠ½ç­‹é æ¸¬æº–ç¢ºç‡</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">Â±0.15L</div>
            <div class="stat-label" data-i18n-key="stat-ai-uf">UFé æ¸¬å¹³å‡èª¤å·®</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">88%</div>
            <div class="stat-label" data-i18n-key="stat-ai-hypotension">ä½è¡€å£“é æ¸¬éˆæ•åº¦</div>
          </div>
          <div class="stat-card">
            <div class="stat-value">0.92</div>
            <div class="stat-label" data-i18n-key="stat-ai-bmd">éª¨å¯†åº¦é æ¸¬ç›¸é—œä¿‚æ•¸</div>
          </div>
        </div>
        <div style="margin-top: 16px; padding: 12px; background: #dcfce7; border-radius: 6px; font-size: 13px; color: #166534;">
          <strong>âœ… æ¨¡å‹è¡¨ç¾è‰¯å¥½</strong><br>
          AIé æ¸¬ç³»çµ±æŒçºŒå­¸ç¿’å„ªåŒ–ä¸­ï¼Œæ•´é«”æº–ç¢ºåº¦ç¬¦åˆè‡¨åºŠæ‡‰ç”¨æ¨™æº–
        </div>
      </div>
    </div>
  </div>

  <script>
        const defaultConfig = {
            patient_name: "é™³å‰æ˜",
            hospital_name: "å°å¤§é†«é™¢",
            department_name: "è¡€æ¶²é€æå®¤"
        };

        // === èªç³»å­—å…¸ ===
        let currentLang = 'zh';

        const i18n = {
            zh: {
                'tab-current-dialysis': 'ğŸ’§æœ¬æ¬¡é€æ',
                'tab-biochem-anemia': 'ğŸ§ª ç”ŸåŒ–æ•¸æ“š',
                'tab-dialysis-efficiency': 'âš¡é€ææ•ˆèƒ½èˆ‡éª¨ç—…',
                'tab-vascular-access': 'ğŸ©¸è¡€ç®¡é€šè·¯',
                'tab-infection-screening': 'ğŸ¦  æ„ŸæŸ“èˆ‡ç¯©æª¢',
                'tab-ai-prediction': 'ğŸ¤–AI é æ¸¬',
                'tab-statistics': 'ğŸ“Šçµ±è¨ˆèˆ‡é†«è­·å“è³ª',

                'label-name': 'ğŸ‘¤ å§“å',
                'label-gender-age': 'æ€§åˆ¥ / å¹´é½¡',
                'label-chart-no': 'ğŸ“‹ç—…æ­·è™Ÿ',
                'label-risk': 'âš ï¸ç—…äººåˆ†ç´š',
                'label-doctor': 'ğŸ‘¨â€âš•ï¸ä¸»æ²»é†«å¸«',
                'label-start': 'é€æèµ·å§‹',
                'label-ward-bed': 'ğŸ¥é™¢å€ / åºŠè™Ÿ',
                'label-session-count': 'ğŸ”¢é€ææ¬¡æ•¸',

                'alert-today-title': 'ä»Šæ—¥è­¦ç¤º',

                'card-current-summary': 'ğŸ“‹ æœ¬æ¬¡é€æè™•æ–¹ & æ‘˜è¦',
                'label-session-date': 'ğŸ“…é€ææ—¥æœŸ',
                'label-session-shift': 'ğŸŒ…ç­åˆ¥',
                'label-start-time': 'â°é–‹å§‹æ™‚é–“',
                'label-end-time': 'â±ï¸çµæŸæ™‚é–“',
                'label-duration': 'â³ç¸½é€ææ™‚æ•¸',
                'label-machine': 'ğŸ–¥ï¸é€ææ©Ÿå‹',
                'label-dialyzer': 'ğŸ”¬äººå·¥è…è‡Ÿ',
                'label-dialysate': 'ğŸ§ªé€ææ¶² Ca/K',
                'label-dry-weight': 'âš–ï¸ä¹¾é«”é‡',
                'label-pre-weight': 'ğŸ“Šé€æå‰é«”é‡',
                'label-uf-plan': 'ğŸ’§é è¨ˆè„«æ°´é‡',
                'label-uf-actual': 'ğŸ’¦å¯¦éš›è„«æ°´é‡',
                'label-qb': 'ğŸ”´è¡€æµé‡ (Qb)',
                'label-qd': 'ğŸ’§é€ææ¶²æµé‡ (Qd)',
                'label-heparin': 'ğŸ’‰æŠ—å‡åŠ‘',
                'label-access': 'ğŸ©¸è¡€ç®¡é€šè·¯',

                'card-vitals': 'ğŸ’“ é€æå‰/å¾Œç”Ÿå‘½å¾µè±¡',
                'th-item': 'é …ç›®',
                'th-pre': 'é€æå‰',
                'th-post': 'é€æå¾Œ',
                'th-status': 'ç‹€æ…‹',
                'row-bp-lying': 'ğŸ©ºè¡€å£“ (è‡¥ä½)',
                'row-bp-sitting': 'ğŸ©ºè¡€å£“ (åä½)',
                'row-pulse': 'ğŸ’—è„ˆæ',
                'row-rr': 'ğŸ«å‘¼å¸',
                'row-temp': 'ğŸŒ¡ï¸ é«”æº«',
                'row-weight': 'âš–ï¸é«”é‡',

                'card-monitoring': 'ğŸ“Š é€æéç¨‹ç›£æ¸¬',
                'btn-chart-view': 'åœ–è¡¨è¦–åœ–',
                'btn-table-view': 'è¡¨æ ¼è¦–åœ–',

                'card-notes': 'ğŸ“ è­·ç†ç´€éŒ„ / äº¤ç­ / é†«å›‘',
                'sub-pre': 'ğŸ”é€æå‰è©•ä¼°',
                'sub-nursing': 'ğŸ“‹è­·ç†ç´€éŒ„',
                'sub-handover': 'ğŸ”„äº¤ç­äº‹é …',
                'sub-orders': 'ğŸ’Šé†«å¸«é†«å›‘',

                'card-biochem-monthly': 'ğŸ§ª æœˆåº¦ç”ŸåŒ–å€¼è¿½è¹¤',
                'card-anemia-trend': 'ğŸ“ˆ è²§è¡€æŒ‡æ¨™è¶¨å‹¢',
                'card-anemia-treatment': 'ğŸ’‰ è²§è¡€æ²»ç™‚ç´€éŒ„',

                'card-efficiency': 'âš¡ é€ææ•ˆèƒ½æŒ‡æ¨™',
                'card-bone': 'ğŸ¦´ éª¨ç¤¦ç‰©è³ªä»£è¬ (CKD-MBD)',
                'card-mbd-medications': 'ğŸ’Š ç›¸é—œç”¨è—¥ç´€éŒ„',

                'card-vascular-current': 'ğŸ©¸ ç¾è¡Œè¡€ç®¡é€šè·¯è³‡è¨Š',
                'card-vascular-recent-eval': 'ğŸ“‹ æœ€è¿‘è©•ä¼°ç´€éŒ„',
                'card-vascular-intervention': 'ğŸ”§ ä»‹å…¥æ²»ç™‚èˆ‡æ‰‹è¡“ç´€éŒ„',
                'card-vascular-history': 'ğŸ“œ æ­·å²é€šè·¯ç´€éŒ„',

                'card-infection-screen': 'ğŸ¦  ç—…æ¯’/æ„ŸæŸ“ç¯©æª¢ç´€éŒ„',
                'card-vaccine': 'ğŸ’‰ ç–«è‹—æ¥ç¨®ç´€éŒ„',
                'card-infection-events': 'ğŸš¨ æ„ŸæŸ“äº‹ä»¶åˆ—è¡¨',
                'card-isolation': 'ğŸ›¡ï¸ éš”é›¢èˆ‡æ„ŸæŸ“æ§åˆ¶æªæ–½',

                'pred-bmd': 'ğŸ¦´ éª¨å¯†åº¦é æ¸¬',
                'pred-bmd-risk': 'éª¨è³ªç–é¬†å‰æœŸ',
                'pred-uf': 'ğŸ’§ å»ºè­°è„«æ°´é‡',
                'pred-uf-prescription': 'é†«å¸«è™•æ–¹ï¼š2.5 L',
                'pred-uf-risk': 'âš ï¸ å·®è· +0.2L',
                'pred-cramp': 'ğŸ¦µ æŠ½ç­‹é¢¨éšªé æ¸¬',
                'pred-cramp-period': 'æœ¬æ¬¡é€ææœŸé–“',
                'pred-cramp-risk': 'é«˜é¢¨éšª',

                'card-ai-input-summary': 'ğŸ” æ¨¡å‹è¼¸å…¥æ‘˜è¦',
                'card-ai-factor-analysis': 'ğŸ“Š å½±éŸ¿å› å­åˆ†æ',
                'card-ai-history-vs-actual': 'ğŸ“ˆ æ­·å²é æ¸¬ vs å¯¦éš›çµæœ',
                'card-ai-suggestions': 'ğŸ’¡ å»ºè­°èˆ‡æ³¨æ„äº‹é …',

                'card-stats-overview': 'ğŸ“Š æ•´é«”å“è³ªæŒ‡æ¨™ç¸½è¦½',
                'stat-ktv': 'å¹³å‡ Kt/V',
                'stat-hb': 'Hb é”æ¨™ç‡',
                'stat-p': 'P æ§åˆ¶é”æ¨™ç‡',
                'stat-hypotension': 'ä½è¡€å£“äº‹ä»¶ç‡',
                'stat-cramp': 'æŠ½ç­‹äº‹ä»¶ç‡',
                'stat-early-stop': 'æå‰çµ‚æ­¢ç‡',

                'card-quality-trend': 'ğŸ“ˆ å“è³ªæŒ‡æ¨™è¶¨å‹¢ (æœˆåº¦)',
                'card-events-month': 'ğŸš¨ äº‹ä»¶çµ±è¨ˆ (æœ¬æœˆ)',
                'card-ai-performance': 'ğŸ¤– AI æ¨¡å‹æ•´é«”è¡¨ç¾',
                'stat-ai-cramp': 'æŠ½ç­‹é æ¸¬æº–ç¢ºç‡',
                'stat-ai-uf': 'UFé æ¸¬å¹³å‡èª¤å·®',
                'stat-ai-hypotension': 'ä½è¡€å£“é æ¸¬éˆæ•åº¦',
                'stat-ai-bmd': 'éª¨å¯†åº¦é æ¸¬ç›¸é—œä¿‚æ•¸'
            },
            en: {
                'tab-current-dialysis': 'ğŸ’§Current Dialysis',
                'tab-biochem-anemia': 'ğŸ§ª Biochemistry & Anemia',
                'tab-dialysis-efficiency': 'âš¡ Dialysis Efficiency & Bone',
                'tab-vascular-access': 'ğŸ©¸ Vascular Access',
                'tab-infection-screening': 'ğŸ¦  Infection & Screening',
                'tab-ai-prediction': 'ğŸ¤– AI Prediction',
                'tab-statistics': 'ğŸ“Š Statistics & Quality',

                'label-name': 'ğŸ‘¤ Name',
                'label-gender-age': 'Gender / Age',
                'label-chart-no': 'ğŸ“‹Chart No.',
                'label-risk': 'âš ï¸Risk Category',
                'label-doctor': 'ğŸ‘¨â€âš•ï¸Attending Physician',
                'label-start': 'Dialysis Start',
                'label-ward-bed': 'ğŸ¥Ward / Bed',
                'label-session-count': 'ğŸ”¢Dialysis Count',

                'alert-today-title': 'Today\'s Alerts',

                'card-current-summary': 'ğŸ“‹ Current Dialysis Prescription & Summary',
                'label-session-date': 'ğŸ“…Dialysis Date',
                'label-session-shift': 'ğŸŒ…Shift',
                'label-start-time': 'â°Start Time',
                'label-end-time': 'â±ï¸End Time',
                'label-duration': 'â³Total Duration',
                'label-machine': 'ğŸ–¥ï¸Machine',
                'label-dialyzer': 'ğŸ”¬Dialyzer',
                'label-dialysate': 'ğŸ§ªDialysate Ca/K',
                'label-dry-weight': 'âš–ï¸Dry Weight',
                'label-pre-weight': 'ğŸ“ŠPre-dialysis Weight',
                'label-uf-plan': 'ğŸ’§Planned UF',
                'label-uf-actual': 'ğŸ’¦Actual UF',
                'label-qb': 'ğŸ”´Blood Flow (Qb)',
                'label-qd': 'ğŸ’§Dialysate Flow (Qd)',
                'label-heparin': 'ğŸ’‰Anticoagulant',
                'label-access': 'ğŸ©¸Access Type',

                'card-vitals': 'ğŸ’“ Pre / Post Vital Signs',
                'th-item': 'Item',
                'th-pre': 'Pre',
                'th-post': 'Post',
                'th-status': 'Status',
                'row-bp-lying': 'ğŸ©ºBP (Supine)',
                'row-bp-sitting': 'ğŸ©ºBP (Sitting)',
                'row-pulse': 'ğŸ’—Pulse',
                'row-rr': 'ğŸ«Respiratory Rate',
                'row-temp': 'ğŸŒ¡ï¸Temperature',
                'row-weight': 'âš–ï¸Weight',

                'card-monitoring': 'ğŸ“Š Intra-dialytic Monitoring',
                'btn-chart-view': 'Chart View',
                'btn-table-view': 'Table View',

                'card-notes': 'ğŸ“ Nursing Notes / Handover / Orders',
                'sub-pre': 'ğŸ”Pre-dialysis Assessment',
                'sub-nursing': 'ğŸ“‹Nursing Notes',
                'sub-handover': 'ğŸ”„Handover',
                'sub-orders': 'ğŸ’ŠPhysician Orders',

                'card-biochem-monthly': 'ğŸ§ª Monthly Biochemistry Trend',
                'card-anemia-trend': 'ğŸ“ˆ Anemia Indices Trend',
                'card-anemia-treatment': 'ğŸ’‰ Anemia Treatment Record',

                'card-efficiency': 'âš¡ Dialysis Efficiency Indices',
                'card-bone': 'ğŸ¦´ CKD-MBD (Bone & Mineral)',
                'card-mbd-medications': 'ğŸ’Š Related Medications',

                'card-vascular-current': 'ğŸ©¸ Current Vascular Access',
                'card-vascular-recent-eval': 'ğŸ“‹ Recent Access Evaluation',
                'card-vascular-intervention': 'ğŸ”§ Interventions & Surgery',
                'card-vascular-history': 'ğŸ“œ Access History',

                'card-infection-screen': 'ğŸ¦  Viral / Infection Screening',
                'card-vaccine': 'ğŸ’‰ Vaccination Record',
                'card-infection-events': 'ğŸš¨ Infection Events',
                'card-isolation': 'ğŸ›¡ï¸ Isolation & Infection Control',

                'pred-bmd': 'ğŸ¦´ Bone Density Prediction',
                'pred-bmd-risk': 'Osteopenia (Predicted)',
                'pred-uf': 'ğŸ’§ Recommended UF Volume',
                'pred-uf-prescription': 'Prescription: 2.5 L',
                'pred-uf-risk': 'âš ï¸ Difference +0.2 L',
                'pred-cramp': 'ğŸ¦µ Cramp Risk Prediction',
                'pred-cramp-period': 'This Session',
                'pred-cramp-risk': 'High Risk',

                'card-ai-input-summary': 'ğŸ” Model Input Summary',
                'card-ai-factor-analysis': 'ğŸ“Š Feature Importance',
                'card-ai-history-vs-actual': 'ğŸ“ˆ Predicted vs. Actual',
                'card-ai-suggestions': 'ğŸ’¡ Suggestions & Precautions',

                'card-stats-overview': 'ğŸ“Š Overall Quality Overview',
                'stat-ktv': 'Mean Kt/V',
                'stat-hb': 'Hb Target Achievement',
                'stat-p': 'P Control Achievement',
                'stat-hypotension': 'Intradialytic Hypotension Rate',
                'stat-cramp': 'Muscle Cramp Rate',
                'stat-early-stop': 'Early Termination Rate',

                'card-quality-trend': 'ğŸ“ˆ Monthly Quality Trend',
                'card-events-month': 'ğŸš¨ Events This Month',
                'card-ai-performance': 'ğŸ¤– AI Model Performance',
                'stat-ai-cramp': 'Cramp Prediction Accuracy',
                'stat-ai-uf': 'UF Prediction Mean Error',
                'stat-ai-hypotension': 'Hypotension Sensitivity',
                'stat-ai-bmd': 'BMD Prediction Correlation'
            }
        };

        function applyLanguage(lang) {
            currentLang = lang;
            const dict = i18n[lang] || {};
            document.querySelectorAll('[data-i18n-key]').forEach(el => {
                const key = el.dataset.i18nKey;
                if (key && dict[key]) {
                    el.textContent = dict[key];
                }
            });
        }

        // å¿«é€ŸæŠ“ data-field helper
        const field = (name) => document.querySelector(`[data-field="${name}"]`);

        // æœ¬æ¬¡é€æå€å¡Šæ¨¡çµ„
        const sections = {
            currentDialysis: {
                fill(data) {
                    const p = data.patient;
                    const s = data.session;
                    const v = data.vitals;

                    // ç—…äºº header
                    if (p) {
                        const nameEl = field('patient-name');
                        if (nameEl) nameEl.textContent = p.name;

                        const gaEl = field('patient-gender-age');
                        if (gaEl) gaEl.textContent = `${p.gender === 'M' ? (currentLang === 'en' ? 'Male' : 'ç”·') : (currentLang === 'en' ? 'Female' : 'å¥³')} / ${p.age}${currentLang === 'en' ? ' yrs' : 'æ­²'}`;

                        const chartEl = field('patient-chart-no');
                        if (chartEl) chartEl.textContent = p.chartNo;

                        const docEl = field('patient-doctor');
                        if (docEl) docEl.textContent = p.doctor;

                        const startEl = field('patient-dialysis-start');
                        if (startEl) startEl.textContent = p.dialysisStart;

                        const wardEl = field('patient-ward-bed');
                        if (wardEl) wardEl.textContent = p.wardBed;

                        const cntEl = field('patient-session-count');
                        if (cntEl) cntEl.textContent = p.sessionCount;

                        const riskBadge = field('patient-risk-badge');
                        if (riskBadge) {
                            riskBadge.textContent = p.riskLabel;
                            riskBadge.classList.remove('badge-high-risk', 'badge-standard');
                            if (p.riskLevel === 'high') {
                                riskBadge.classList.add('badge-high-risk');
                            } else {
                                riskBadge.classList.add('badge-standard');
                            }
                        }
                    }

                    // æœ¬æ¬¡é€æè™•æ–¹
                    if (s) {
                        const map = {
                            'session-date': s.date,
                            'session-shift': s.shift,
                            'session-start-time': s.startTime,
                            'session-end-time': s.endTime,
                            'session-duration': s.duration,
                            'session-machine': s.machine,
                            'session-dialyzer': s.dialyzer,
                            'session-dialysate': `${s.dialysateCa}/${s.dialysateK} mEq/L`,
                            'session-dry-weight': `${s.dryWeight} kg`,
                            'session-pre-weight': `${s.preWeight} kg`,
                            'session-uf-plan': `${s.ufPlan} L`,
                            'session-uf-actual': `${s.ufActual} L`,
                            'session-qb': `${s.qb} mL/min`,
                            'session-qd': `${s.qd} mL/min`,
                            'session-heparin': s.heparin,
                            'session-access': s.access
                        };
                        Object.keys(map).forEach(k => {
                            const el = field(k);
                            if (el) el.textContent = map[k];
                        });
                    }

                    // ç”Ÿå‘½å¾µè±¡ç¤ºç¯„
                    if (v) {
                        const preBP = field('vital-pre-bp-lying');
                        if (preBP) preBP.textContent = v.pre.bpLying + ' mmHg';

                        const postBP = field('vital-post-bp-lying');
                        if (postBP) postBP.textContent = v.post.bpLying + ' mmHg';

                        const statusEl = field('vital-bp-status');
                        if (statusEl) statusEl.textContent = v.bpStatusText;
                    }
                }
            }
        };

        // ç¤ºç¯„ç”¨å‡è³‡æ–™ï¼Œä¹‹å¾Œå¯ä»¥æ›æˆ API å›å‚³
        const demoSessionData = {
            patient: {
                name: 'é™³å‰æ˜',
                gender: 'M',
                age: 65,
                chartNo: '2583368',
                doctor: 'è¨±é†«å¸«',
                dialysisStart: '2018å¹´3æœˆ',
                wardBed: 'ç¸½é™¢ / A01',
                sessionCount: 'æœ¬æœˆç¬¬12æ¬¡ / ç´¯ç©ç¬¬936æ¬¡',
                riskLevel: 'high',
                riskLabel: 'é«˜é¢¨éšª'
            },
            session: {
                date: '2024-03-15',
                shift: 'æ—©ç­',
                startTime: '08:15',
                endTime: '12:15',
                duration: '4å°æ™‚',
                machine: 'Fresenius 5008S',
                dialyzer: 'FX80',
                dialysateCa: 2.5,
                dialysateK: 2.0,
                dryWeight: 68.5,
                preWeight: 71.0,
                ufPlan: 2.5,
                ufActual: 2.2,
                qb: 300,
                qd: 500,
                heparin: 'Heparin 3000U',
                access: 'AVF å·¦å‰è‡‚'
            },
            vitals: {
                pre: { bpLying: '145/85' },
                post: { bpLying: '110/70' },
                bpStatusText: 'âš ï¸ åä½'
            },
            monitoring: [
                { time: '08:15', sbp: 145, dbp: 85, uf_cum: 0.0 },
                { time: '09:00', sbp: 135, dbp: 80, uf_cum: 0.6 },
                { time: '09:45', sbp: 105, dbp: 65, uf_cum: 1.1 },
                { time: '10:30', sbp: 120, dbp: 75, uf_cum: 1.6 },
                { time: '11:15', sbp: 100, dbp: 60, uf_cum: 2.0 },
                { time: '12:00', sbp: 115, dbp: 70, uf_cum: 2.2 },
                { time: '12:15', sbp: 110, dbp: 70, uf_cum: 2.2 }
            ]
        };

        // Tab switching
        document.querySelectorAll('.main-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                const tabName = this.getAttribute('data-tab');

                document.querySelectorAll('.main-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');

                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(tabName).classList.add('active');
            });
        });

        // View toggle
        function showView(view) {
            const chartView = document.getElementById('chart-view');
            const tableView = document.getElementById('table-view');
            const buttons = document.querySelectorAll('.toggle-btn');

            buttons.forEach(btn => btn.classList.remove('active'));

            if (view === 'chart') {
                chartView.classList.remove('hidden');
                tableView.classList.add('hidden');
                buttons[0].classList.add('active');
            } else {
                chartView.classList.add('hidden');
                tableView.classList.remove('hidden');
                buttons[1].classList.add('active');
            }
        }

        // Sub-tab switching
        function showSubTab(tabName) {
            document.querySelectorAll('.sub-tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');

            document.querySelectorAll('.notes-content').forEach(content => {
                content.classList.add('hidden');
            });
            document.getElementById(tabName).classList.remove('hidden');
        }

        // Add note function
        function addNote() {
            const modal = document.createElement('div');
            modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 10000;';
            modal.innerHTML = `
                <div style="background: white; padding: 24px; border-radius: 12px; max-width: 500px; width: 90%;">
                    <h3 style="margin: 0 0 16px 0; color: #1e293b;">æ–°å¢ç´€éŒ„</h3>
                    <textarea id="noteInput" style="width: 100%; height: 120px; padding: 12px; border: 1px solid #e2e8f0; border-radius: 6px; font-family: inherit; font-size: 14px; resize: vertical;" placeholder="è«‹è¼¸å…¥ç´€éŒ„å…§å®¹..."></textarea>
                    <div style="display: flex; gap: 12px; margin-top: 16px; justify-content: flex-end;">
                        <button onclick="this.closest('div').parentElement.remove()" style="padding: 8px 16px; border: 1px solid #e2e8f0; background: white; border-radius: 6px; cursor: pointer;">å–æ¶ˆ</button>
                        <button onclick="saveNote()" style="padding: 8px 16px; border: none; background: #2563eb; color: white; border-radius: 6px; cursor: pointer;">å„²å­˜</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        function saveNote() {
            const input = document.getElementById('noteInput');
            const noteText = input.value.trim();

            if (noteText) {
                const now = new Date();
                const timeStr = `${now.getFullYear()}-${String(now.getMonth()+1).padStart(2,'0')}-${String(now.getDate()).padStart(2,'0')} ${String(now.getHours()).padStart(2,'0')}:${String(now.getMinutes()).padStart(2,'0')}`;

                const activeContent = document.querySelector('.notes-content:not(.hidden)');
                const noteItem = document.createElement('div');
                noteItem.className = 'note-item';
                noteItem.innerHTML = `
                    <div class="note-time">${timeStr} - è­·ç†å¸« ç‹å°æ˜</div>
                    <div class="note-text">${noteText}</div>
                `;

                const addBtn = activeContent.querySelector('.add-note-btn');
                activeContent.insertBefore(noteItem, addBtn);

                document.querySelector('div[style*="position: fixed"]').remove();
            }
        }

        let monitoringChart;

        function buildMonitoringChart() {
            const monitoringCtx = document.getElementById('monitoringChart');
            if (!monitoringCtx) return;

            monitoringChart = new Chart(monitoringCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'æ”¶ç¸®å£“ (mmHg)',
                        data: [],
                        borderColor: '#2563eb',
                        backgroundColor: 'rgba(37, 99, 235, 0.1)',
                        tension: 0.4,
                        yAxisID: 'y'
                    }, {
                        label: 'èˆ’å¼µå£“ (mmHg)',
                        data: [],
                        borderColor: '#60a5fa',
                        backgroundColor: 'rgba(96, 165, 250, 0.1)',
                        tension: 0.4,
                        yAxisID: 'y'
                    }, {
                        label: 'ç´¯ç©UF (L)',
                        data: [],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4,
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 50,
                            max: 160,
                            title: { display: true, text: 'è¡€å£“ (mmHg)' }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            min: 0,
                            max: 3,
                            title: { display: true, text: 'ç´¯ç©UF (L)' },
                            grid: { drawOnChartArea: false }
                        }
                    },
                    plugins: {
                        legend: { position: 'top' }
                    }
                }
            });
        }

        function updateMonitoringChart(rows) {
            if (!monitoringChart) return;
            monitoringChart.data.labels = rows.map(r => r.time);
            monitoringChart.data.datasets[0].data = rows.map(r => r.sbp);
            monitoringChart.data.datasets[1].data = rows.map(r => r.dbp);
            monitoringChart.data.datasets[2].data = rows.map(r => r.uf_cum);
            monitoringChart.update();
        }

        // å…¶ä»–åœ–ç¶­æŒåŸæœ¬éœæ…‹è³‡æ–™
        function initOtherCharts() {
            // Anemia Chart
            const anemiaCtx = document.getElementById('anemiaChart');
            if (anemiaCtx) {
                new Chart(anemiaCtx, {
                    type: 'line',
                    data: {
                        labels: ['2023-12', '2024-01', '2024-02', '2024-03'],
                        datasets: [{
                            label: 'Hb (g/dL)',
                            data: [10.2, 9.2, 9.5, 9.8],
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Ferritin (ng/mL)',
                            data: [295, 220, 265, 285],
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            tension: 0.4,
                            yAxisID: 'y1'
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 8,
                                max: 12,
                                title: { display: true, text: 'Hb (g/dL)' }
                            },
                            y1: {
                                type: 'linear',
                                display: true,
                                position: 'right',
                                min: 0,
                                max: 500,
                                title: { display: true, text: 'Ferritin (ng/mL)' },
                                grid: { drawOnChartArea: false }
                            }
                        }
                    }
                });
            }

            // Kt/V Chart
            const ktVCtx = document.getElementById('ktVChart');
            if (ktVCtx) {
                new Chart(ktVCtx, {
                    type: 'line',
                    data: {
                        labels: ['2023-12', '2024-01', '2024-02', '2024-03'],
                        datasets: [{
                            label: 'Kt/V',
                            data: [1.48, 1.42, 1.45, 1.43],
                            borderColor: '#2563eb',
                            backgroundColor: 'rgba(37, 99, 235, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 1.0,
                                max: 2.0,
                                title: { display: true, text: 'Kt/V' }
                            }
                        }
                    }
                });
            }

            // CKD-MBD Chart
            const ckdMbdCtx = document.getElementById('ckdMbdChart');
            if (ckdMbdCtx) {
                new Chart(ckdMbdCtx, {
                    type: 'line',
                    data: {
                        labels: ['2023-12', '2024-01', '2024-02', '2024-03'],
                        datasets: [{
                            label: 'Ca (mg/dL)',
                            data: [9.5, 8.8, 9.0, 9.2],
                            borderColor: '#2563eb',
                            backgroundColor: 'rgba(37, 99, 235, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'P (mg/dL)',
                            data: [5.5, 6.5, 6.2, 5.8],
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 3,
                                max: 12,
                                title: { display: true, text: 'mg/dL' }
                            }
                        }
                    }
                });
            }

            // Quality Trend Chart
            const qualityCtx = document.getElementById('qualityTrendChart');
            if (qualityCtx) {
                new Chart(qualityCtx, {
                    type: 'line',
                    data: {
                        labels: ['2023-10', '2023-11', '2023-12', '2024-01', '2024-02', '2024-03'],
                        datasets: [{
                            label: 'Hbé”æ¨™ç‡ (%)',
                            data: [72, 75, 80, 76, 78, 78],
                            borderColor: '#2563eb',
                            backgroundColor: 'rgba(37, 99, 235, 0.1)',
                            tension: 0.4
                        }, {
                            label: 'Pæ§åˆ¶é”æ¨™ç‡ (%)',
                            data: [58, 62, 68, 63, 65, 65],
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 100,
                                title: { display: true, text: 'é”æ¨™ç‡ (%)' }
                            }
                        }
                    }
                });
            }
        }

        async function loadSessionDemo() {
            const data = demoSessionData; // ä¹‹å¾Œæ›æˆ API å›å‚³
            sections.currentDialysis.fill(data);
            updateMonitoringChart(data.monitoring);
        }

        async function onConfigChange(config) {
            const pn = document.getElementById('patient-name');
            if (pn) pn.textContent = config.patient_name || defaultConfig.patient_name;

            const hn = document.getElementById('hospital-name');
            if (hn) hn.textContent = config.hospital_name || defaultConfig.hospital_name;

            const dn = document.getElementById('department-name');
            if (dn) dn.textContent = config.department_name || defaultConfig.department_name;
        }

        // Canva elementSdkï¼ˆåœ¨ Canva è£¡æ‰æœƒå­˜åœ¨ï¼‰
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig,
                onConfigChange,
                mapToCapabilities: (config) => ({
                    recolorables: [],
                    borderables: [],
                    fontEditable: undefined,
                    fontSizeable: undefined
                }),
                mapToEditPanelValues: (config) => new Map([
                    ["patient_name", config.patient_name || defaultConfig.patient_name],
                    ["hospital_name", config.hospital_name || defaultConfig.hospital_name],
                    ["department_name", config.department_name || defaultConfig.department_name]
                ])
            });
        }

        // Initialize on load
        document.addEventListener('DOMContentLoaded', function() {
            // èªç³»æŒ‰éˆ•äº‹ä»¶
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    const lang = btn.dataset.lang || 'zh';
                    applyLanguage(lang);
                    // é‡æ–°æ¸²æŸ“ç—…äºº header ä¸­çš„æ€§åˆ¥/å¹´é½¡é¡¯ç¤º
                    sections.currentDialysis.fill(demoSessionData);
                });
            });

            applyLanguage(currentLang);
            buildMonitoringChart();
            initOtherCharts();
            loadSessionDemo();
        });
  </script>
</body>
</html>
